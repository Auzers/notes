<!DOCTYPE html><html class=no-js lang=zh> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content=这里是amaranth的博客 name=description><meta content=amaranth name=author><link href=https://Auzers.github.io/notes/computer/C%2B%2B/ac_cpp/ rel=canonical><link href=../../C/scatter/ rel=prev><link href=../C%2B%2B/ rel=next><link href=../../../assets/images/logo1.png rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.5.49" name=generator><title>速成 C++ - amaranth 的 叶栈漫谈</title><link href=../../../assets/stylesheets/main.6f8fc17f.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.06af60db.min.css rel=stylesheet><style>:root{--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M320 96a32 32 0 1 1-64 0 32 32 0 1 1 64 0m21.1 80C367 158.8 384 129.4 384 96c0-53-43-96-96-96s-96 43-96 96c0 33.4 17 62.8 42.9 80H224c-17.7 0-32 14.3-32 32s14.3 32 32 32h32v208h-48c-53 0-96-43-96-96v-6.1l7 7c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L97 263c-9.4-9.4-24.6-9.4-33.9 0L7 319c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l7-7v6.1c0 88.4 71.6 160 160 160h160c88.4 0 160-71.6 160-160v-6.1l7 7c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-56-56c-9.4-9.4-24.6-9.4-33.9 0l-56 56c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l7-7v6.1c0 53-43 96-96 96h-48V240h32c17.7 0 32-14.3 32-32s-14.3-32-32-32h-10.9z"/></svg>');--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m368.4 18.3-55.7 55.8 125.2 125.2 55.7-55.7c21.9-21.9 21.9-57.3 0-79.2l-46-46.1c-21.9-21.9-57.3-21.9-79.2 0M288 94.6l-9.2 2.8-144.1 43.2c-19.9 6-35.7 21.2-42.3 41L3.8 445.8c-3.8 11.3-1 23.9 7.3 32.4l153.6-153.5c-3-6.3-4.7-13.3-4.7-20.7 0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48c-7.4 0-14.4-1.7-20.7-4.7L33.7 500.9c8.6 8.3 21.1 11.2 32.4 7.3l264.3-88.6c19.7-6.6 35-22.4 41-42.3l43.2-144.1 2.7-9.2z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24m24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2h160zm-80 128c44.2 0 80-35.8 80-80v-16H112v16c0 44.2 35.8 80 80 80m-80-336c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7l233.4-233.3c12.5-12.5 32.8-12.5 45.3 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512m-86.2-346.7c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1 0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6-13.3 0-24-10.7-24-24v-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1 0-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1-64 0"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7.2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8.2-40.1l216-368C228.7 39.5 241.8 32 256 32m0 128c-13.3 0-24 10.7-24 24v112c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24m32 224a32 32 0 1 0-64 0 32 32 0 1 0 64 0"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3c4.97 0 9 3.58 9 8s-6 10-9 10-9-5.58-9-10 4.03-8 9-8m-1.69 7.93C9.29 9.29 7.47 8.58 6.25 9.34s-1.38 2.71-.36 4.35c1.03 1.64 2.85 2.35 4.07 1.59 1.22-.78 1.37-2.71.35-4.35m3.38 0c-1.02 1.64-.87 3.57.35 4.35 1.22.76 3.04.05 4.07-1.59 1.02-1.64.86-3.59-.36-4.35s-3.04-.05-4.06 1.59M12 17.75c-2 0-2.5-.75-2.5-.75 0 .03.5 2 2.5 2s2.5-2 2.5-2-.5.75-2.5.75"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v11.5c0 49.9-60.3 74.9-95.6 39.6l-8.2-8.1C107.7 62.5 87.5 62.5 75 75s-12.5 32.8 0 45.3l8.2 8.2c35.2 35.2 10.2 95.5-39.7 95.5H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h11.5c49.9 0 74.9 60.3 39.6 95.6l-8.1 8.2c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l8.2-8.2c35.3-35.3 95.6-10.3 95.6 39.6V480c0 17.7 14.3 32 32 32s32-14.3 32-32v-11.5c0-49.9 60.3-74.9 95.6-39.6l8.2 8.2c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-8.2-8.2c-35.3-35.3-10.3-95.6 39.6-95.6h11.5c17.7 0 32-14.3 32-32s-14.3-32-32-32h-11.5c-49.9 0-74.9-60.3-39.6-95.6l8.2-8.2c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-8.2 8.2C348.3 118.4 288 93.4 288 43.5zM176 224a48 48 0 1 1 96 0 48 48 0 1 1-96 0m128 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M320 0c17.7 0 32 14.3 32 32v64h120c39.8 0 72 32.2 72 72v272c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72h120V32c0-17.7 14.3-32 32-32M208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16zM264 256a40 40 0 1 0-80 0 40 40 0 1 0 80 0m152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80M48 224h16v192H48c-26.5 0-48-21.5-48-48v-96c0-26.5 21.5-48 48-48m544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-16V224z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M288 0H128c-17.7 0-32 14.3-32 32s14.3 32 32 32v132.8c0 11.8-3.3 23.5-9.5 33.5L10.3 406.2C3.6 417.2 0 429.7 0 442.6 0 480.9 31.1 512 69.4 512h309.2c38.3 0 69.4-31.1 69.4-69.4 0-12.8-3.6-25.4-10.3-36.4L329.5 230.4c-6.2-10.1-9.5-21.7-9.5-33.5V64c17.7 0 32-14.3 32-32S337.7 0 320 0zm-96 196.8V64h64v132.8c0 23.7 6.6 46.9 19 67.1l34.5 56.1h-171l34.5-56.1c12.4-20.2 19-43.4 19-67.1"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6 31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5 50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0 27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0z"/></svg>');}</style><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=LXGW+WenKai+Screen+GB+Screen:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"LXGW WenKai Screen GB Screen";--md-code-font:"JetBrains Mono"}</style><link href=../../../css/heti.css rel=stylesheet><link href=../../../css/toc_extra.css rel=stylesheet><link href=https://gcore.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css rel=stylesheet><link href=https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css rel=stylesheet><link href=https://cdn.tonycrane.cc/jbmono/jetbrainsmono.css rel=stylesheet><link href=https://cdn.tonycrane.cc/lxgw/lxgwscreen.css rel=stylesheet><link href=../../../css/custom.min.css rel=stylesheet><link href=../../../css/tasklist.min.css rel=stylesheet><link href=../../../css/card.min.css rel=stylesheet><link href=../../../css/flink.min.css rel=stylesheet><link href=../../../css/fold_toc.min.css rel=stylesheet><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=default dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#0-c> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav aria-label=页眉 class="md-header__inner md-grid"> <a aria-label="amaranth 的 叶栈漫谈" class="md-header__button md-logo" data-md-component=logo href=../../.. title="amaranth 的 叶栈漫谈"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 8C8 10 5.9 16.17 3.82 21.34l1.89.66.95-2.3c.48.17.98.3 1.34.3C19 20 22 3 22 3c-1 2-8 2.25-13 3.25S2 11.5 2 13.5s1.75 3.75 1.75 3.75C7 8 17 8 17 8"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> amaranth 的 叶栈漫谈 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 速成 C++ </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="follow system" class=md-option data-md-color-accent=indigo data-md-color-media=(prefers-color-scheme) data-md-color-primary=indigo data-md-color-scheme=default id=__palette_0 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="follow system"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg> </label> <input aria-label="light mode" class=md-option data-md-color-accent=indigo data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary=pink data-md-color-scheme=default id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input aria-label=darkmode class=md-option data-md-color-accent=indigo data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary=black data-md-color-scheme=slate id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_0 hidden title=darkmode> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=搜索 autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=搜索 required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav aria-label=查找 class=md-search__options> <a aria-label=分享 class="md-search__icon md-icon" data-clipboard data-clipboard-text data-md-component=search-share href=javascript:void(0) tabindex=-1 title=分享> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button aria-label=清空当前内容 class="md-search__icon md-icon" tabindex=-1 title=清空当前内容 type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix tabindex=0> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/Auzers/notes/ title=前往仓库> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg> </div> <div class=md-source__repository> amaranth's site </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=标签 class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../../..> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"></path></svg> Computer Science </a> </li> <li class=md-tabs__item> <a href=../../../ai/ class=md-tabs__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> AI </a> </li> <li class=md-tabs__item> <a href=../../../tools/ class=md-tabs__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16h-2v-1H8v1H6v-1H2v5h20v-5h-4zm2-8h-3V6c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v4h4v-2h2v2h8v-2h2v2h4v-4c0-1.1-.9-2-2-2m-5 0H9V6h6z"></path></svg> Else </a> </li> <li class=md-tabs__item> <a href=../../../summary/ class=md-tabs__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M6 1h2v2h8V1h2v2h1a2 2 0 0 1 2 2v14c0 1.11-.89 2-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2h1zM5 8v11h14V8zm2 2h10v2H7z"></path></svg> Summary </a> </li> <li class=md-tabs__item> <a href=../../../Blogs/ class=md-tabs__link> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M192 32c0 17.7 14.3 32 32 32 123.7 0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32m0 96c0 17.7 14.3 32 32 32 70.7 0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7 0-32 14.3-32 32m-96 16c0-26.5-21.5-48-48-48S0 117.5 0 144v224c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144h-16v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48z"></path></svg> Blogs </a> </li> <li class=md-tabs__item> <a href=../../../tags/ class=md-tabs__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M5.5 7A1.5 1.5 0 0 1 4 5.5 1.5 1.5 0 0 1 5.5 4 1.5 1.5 0 0 1 7 5.5 1.5 1.5 0 0 1 5.5 7m15.91 4.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.11 0-2 .89-2 2v7c0 .55.22 1.05.59 1.41l8.99 9c.37.36.87.59 1.42.59s1.05-.23 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.56-.23-1.06-.59-1.42"></path></svg> Tags </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=导航栏 class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="amaranth 的 叶栈漫谈" class="md-nav__button md-logo" data-md-component=logo href=../../.. title="amaranth 的 叶栈漫谈"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 8C8 10 5.9 16.17 3.82 21.34l1.89.66.95-2.3c.48.17.98.3 1.34.3C19 20 22 3 22 3c-1 2-8 2.25-13 3.25S2 11.5 2 13.5s1.75 3.75 1.75 3.75C7 8 17 8 17 8"></path></svg> </a> amaranth 的 叶栈漫谈 </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/Auzers/notes/ title=前往仓库> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg> </div> <div class=md-source__repository> amaranth's site </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_1 type=checkbox> <div class="md-nav__link md-nav__container"> <a class=md-nav__link href=../../..> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg> <span class=md-ellipsis> Home </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_1_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_2 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"></path></svg> <span class=md-ellipsis> Computer Science </span> </a> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_2_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Computer Science </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_2 type=checkbox> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> CS61A </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> CS61A </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CS61A/CS61A_notes/ class=md-nav__link> <span class=md-ellipsis> CS61A_notes </span> </a> </li> <li class=md-nav__item> <a href=../../CS61A/CS61A_resource/ class=md-nav__link> <span class=md-ellipsis> something related </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_3 type=checkbox> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Data Structure </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Data Structure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Algorithm/algorithm/ class=md-nav__link> <span class=md-ellipsis> Basis of algorithm </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_4 type=checkbox> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> CSAPP </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> CSAPP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CSAPP/resource/ class=md-nav__link> <span class=md-ellipsis> Resource </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_5 type=checkbox> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class=md-ellipsis> C语言 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> C语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../C/learning_c/ class=md-nav__link> <span class=md-ellipsis> C语言 </span> </a> </li> <li class=md-nav__item> <a href=../../C/scatter/ class=md-nav__link> <span class=md-ellipsis> something scattered </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_2_6 type=checkbox> <label class=md-nav__link for=__nav_2_6 id=__nav_2_6_label tabindex=0> <span class=md-ellipsis> C++ </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_2_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 速成 C++ </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 速成 C++ </span> </a> <nav aria-label=目录 class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#0-c> <span class=md-ellipsis> 0 开始学习 C++ </span> </a> <nav aria-label="0 开始学习 C++" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#01> <span class=md-ellipsis> 0.1 注释 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#02-include> <span class=md-ellipsis> 0.2 #include 指令 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#03-main> <span class=md-ellipsis> 0.3 main 函数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#04> <span class=md-ellipsis> 0.4 花括号 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#05> <span class=md-ellipsis> 0.5 使用标准库进行输出 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#06> <span class=md-ellipsis> 0.6 返回语句 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#07> <span class=md-ellipsis> 0.7 深入观察 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#08> <span class=md-ellipsis> 0.8 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#01-c> <span class=md-ellipsis> 01 开始学习 C++ </span> </a> <nav aria-label="01 开始学习 C++" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#11> <span class=md-ellipsis> 1.1 输入 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#12> <span class=md-ellipsis> 1.2 为姓名装框 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#13> <span class=md-ellipsis> 1.3 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#02> <span class=md-ellipsis> 02 循环和计数 </span> </a> <nav aria-label="02 循环和计数" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#21> <span class=md-ellipsis> 2.1 问题 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#22> <span class=md-ellipsis> 2.2 程序的整体结构 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#23> <span class=md-ellipsis> 2.3 输出数目未知的行 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#24> <span class=md-ellipsis> 2.4 输出一行 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#25> <span class=md-ellipsis> 2.5 完整的框架程序 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#26> <span class=md-ellipsis> 2.6 计数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#27> <span class=md-ellipsis> 2.7 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#03> <span class=md-ellipsis> 03 使用批量数据 </span> </a> <nav aria-label="03 使用批量数据" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#31> <span class=md-ellipsis> 3.1 计算学生成绩 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#32> <span class=md-ellipsis> 3.2 中值代替平均值 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#04_1> <span class=md-ellipsis> 04 组织程序和数据 </span> </a> <nav aria-label="04 组织程序和数据" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#41> <span class=md-ellipsis> 4.1 组织计算 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#42> <span class=md-ellipsis> 4.2 组织数据 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#43> <span class=md-ellipsis> 4.3 把各部分代码连接到一起 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#44> <span class=md-ellipsis> 4.4 把计算成绩的程序分块 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#45> <span class=md-ellipsis> 4.5 修正后的计算成绩的程序 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#46> <span class=md-ellipsis> 4.6 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#05_1> <span class=md-ellipsis> 05 使用顺序容器并分析字符串 </span> </a> <nav aria-label="05 使用顺序容器并分析字符串" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#51> <span class=md-ellipsis> 5.1 按类别来区分学生 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#52> <span class=md-ellipsis> 5.2 迭代器 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#53> <span class=md-ellipsis> 5.3 用迭代器代替索引 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#54> <span class=md-ellipsis> 5.4 重新思考数据结构以实现更好的性能 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#55-list> <span class=md-ellipsis> 5.5 list 类型 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#56> <span class=md-ellipsis> 5.6 分割字符串 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#57-split> <span class=md-ellipsis> 5.7 测试 split 函数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#58> <span class=md-ellipsis> 5.8 连接字符串 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#59> <span class=md-ellipsis> 5.9 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#06_1> <span class=md-ellipsis> 06 使用库算法 </span> </a> <nav aria-label="06 使用库算法" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#61> <span class=md-ellipsis> 6.1 分析字符串 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#62> <span class=md-ellipsis> 6.2 对计算成绩的方案进行比较 (可读性很差) </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#65> <span class=md-ellipsis> 6.5 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#07_1> <span class=md-ellipsis> 07 使用关联容器 </span> </a> <nav aria-label="07 使用关联容器" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#71> <span class=md-ellipsis> 7.1 支持高效查找的容器 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#72> <span class=md-ellipsis> 7.2 计算单词数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#73> <span class=md-ellipsis> 7.3 产生一个交叉引用表 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#74> <span class=md-ellipsis> 7.4 生成句子 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#75> <span class=md-ellipsis> 7.5 关于性能的说明 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#76> <span class=md-ellipsis> 7.6 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#08_1> <span class=md-ellipsis> 08 编写泛型函数 </span> </a> <nav aria-label="08 编写泛型函数" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#81> <span class=md-ellipsis> 8.1 泛型函数是什么 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#82> <span class=md-ellipsis> 8.2 数据结构独立性 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#09> <span class=md-ellipsis> 09 定义新类型 </span> </a> <nav aria-label="09 定义新类型" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#91-student_info> <span class=md-ellipsis> 9.1 回顾一下 Student_info </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#92> <span class=md-ellipsis> 9.2 自定义类型 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#93> <span class=md-ellipsis> 9.3 保护 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#94-student_info> <span class=md-ellipsis> 9.4 Student_info 类 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#95> <span class=md-ellipsis> 9.5 构造函数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#96-student_info> <span class=md-ellipsis> 9.6 使用 Student_info 类 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#97> <span class=md-ellipsis> 9.7 小结 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../C%2B%2B/ class=md-nav__link> <span class=md-ellipsis> C++ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_7 type=checkbox> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex=0> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_7_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Linux/linux2/ class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../ai/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> <span class=md-ellipsis> AI </span> </a> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> AI </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_2 type=checkbox> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Ng-machine learning </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Ng-machine learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ai/ml/wedml/ class=md-nav__link> <span class=md-ellipsis> 课程笔记 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_3 type=checkbox> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ai/aitools/numpy/ class=md-nav__link> <span class=md-ellipsis> Numpy </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../tools/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16h-2v-1H8v1H6v-1H2v5h20v-5h-4zm2-8h-3V6c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v4h4v-2h2v2h8v-2h2v2h4v-4c0-1.1-.9-2-2-2m-5 0H9V6h6z"></path></svg> <span class=md-ellipsis> Else </span> </a> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Else </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_2 type=checkbox> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> autohotkey </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> autohotkey </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tools/autohotkey/auto/ class=md-nav__link> <span class=md-ellipsis> 键位映射 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3 type=checkbox> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> git &amp; github </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> git &amp; github </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tools/git/git/ class=md-nav__link> <span class=md-ellipsis> git </span> </a> </li> <li class=md-nav__item> <a href=../../../tools/git/github/ class=md-nav__link> <span class=md-ellipsis> github </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_4 type=checkbox> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> problems I met </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> problems I met </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tools/problem/problem/ class=md-nav__link> <span class=md-ellipsis> problem and solution </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../summary/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M6 1h2v2h8V1h2v2h1a2 2 0 0 1 2 2v14c0 1.11-.89 2-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2h1zM5 8v11h14V8zm2 2h10v2H7z"></path></svg> <span class=md-ellipsis> Summary </span> </a> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Summary </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_2 type=checkbox> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> summaries </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> summaries </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../summary/2025/03_05/ class=md-nav__link> <span class=md-ellipsis> 第3~5周 </span> </a> </li> <li class=md-nav__item> <a href=../../../summary/2025/06/ class=md-nav__link> <span class=md-ellipsis> 第 6 周 </span> </a> </li> <li class=md-nav__item> <a href=../../../summary/2025/07/ class=md-nav__link> <span class=md-ellipsis> 第 7 周 </span> </a> </li> <li class=md-nav__item> <a href=../../../summary/2025/08/ class=md-nav__link> <span class=md-ellipsis> 第 8 周 </span> </a> </li> <li class=md-nav__item> <a href=../../../summary/2025/09/ class=md-nav__link> <span class=md-ellipsis> 第 9 周 </span> </a> </li> <li class=md-nav__item> <a href=../../../summary/2025/10/ class=md-nav__link> <span class=md-ellipsis> 第 10 周 </span> </a> </li> <li class=md-nav__item> <a href=../../../summary/2025/11/ class=md-nav__link> <span class=md-ellipsis> 第 11 周 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Blogs/ class=md-nav__link> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M192 32c0 17.7 14.3 32 32 32 123.7 0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32m0 96c0 17.7 14.3 32 32 32 70.7 0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7 0-32 14.3-32 32m-96 16c0-26.5-21.5-48-48-48S0 117.5 0 144v224c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144h-16v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48z"></path></svg> <span class=md-ellipsis> Blogs </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_6_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Blogs </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../tags/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M5.5 7A1.5 1.5 0 0 1 4 5.5 1.5 1.5 0 0 1 5.5 4 1.5 1.5 0 0 1 7 5.5 1.5 1.5 0 0 1 5.5 7m15.91 4.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.11 0-2 .89-2 2v7c0 .55.22 1.05.59 1.41l8.99 9c.37.36.87.59 1.42.59s1.05-.23 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.56-.23-1.06-.59-1.42"></path></svg> <span class=md-ellipsis> Tags </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=目录 class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#0-c> <span class=md-ellipsis> 0 开始学习 C++ </span> </a> <nav aria-label="0 开始学习 C++" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#01> <span class=md-ellipsis> 0.1 注释 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#02-include> <span class=md-ellipsis> 0.2 #include 指令 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#03-main> <span class=md-ellipsis> 0.3 main 函数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#04> <span class=md-ellipsis> 0.4 花括号 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#05> <span class=md-ellipsis> 0.5 使用标准库进行输出 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#06> <span class=md-ellipsis> 0.6 返回语句 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#07> <span class=md-ellipsis> 0.7 深入观察 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#08> <span class=md-ellipsis> 0.8 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#01-c> <span class=md-ellipsis> 01 开始学习 C++ </span> </a> <nav aria-label="01 开始学习 C++" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#11> <span class=md-ellipsis> 1.1 输入 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#12> <span class=md-ellipsis> 1.2 为姓名装框 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#13> <span class=md-ellipsis> 1.3 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#02> <span class=md-ellipsis> 02 循环和计数 </span> </a> <nav aria-label="02 循环和计数" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#21> <span class=md-ellipsis> 2.1 问题 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#22> <span class=md-ellipsis> 2.2 程序的整体结构 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#23> <span class=md-ellipsis> 2.3 输出数目未知的行 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#24> <span class=md-ellipsis> 2.4 输出一行 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#25> <span class=md-ellipsis> 2.5 完整的框架程序 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#26> <span class=md-ellipsis> 2.6 计数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#27> <span class=md-ellipsis> 2.7 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#03> <span class=md-ellipsis> 03 使用批量数据 </span> </a> <nav aria-label="03 使用批量数据" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#31> <span class=md-ellipsis> 3.1 计算学生成绩 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#32> <span class=md-ellipsis> 3.2 中值代替平均值 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#04_1> <span class=md-ellipsis> 04 组织程序和数据 </span> </a> <nav aria-label="04 组织程序和数据" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#41> <span class=md-ellipsis> 4.1 组织计算 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#42> <span class=md-ellipsis> 4.2 组织数据 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#43> <span class=md-ellipsis> 4.3 把各部分代码连接到一起 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#44> <span class=md-ellipsis> 4.4 把计算成绩的程序分块 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#45> <span class=md-ellipsis> 4.5 修正后的计算成绩的程序 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#46> <span class=md-ellipsis> 4.6 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#05_1> <span class=md-ellipsis> 05 使用顺序容器并分析字符串 </span> </a> <nav aria-label="05 使用顺序容器并分析字符串" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#51> <span class=md-ellipsis> 5.1 按类别来区分学生 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#52> <span class=md-ellipsis> 5.2 迭代器 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#53> <span class=md-ellipsis> 5.3 用迭代器代替索引 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#54> <span class=md-ellipsis> 5.4 重新思考数据结构以实现更好的性能 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#55-list> <span class=md-ellipsis> 5.5 list 类型 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#56> <span class=md-ellipsis> 5.6 分割字符串 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#57-split> <span class=md-ellipsis> 5.7 测试 split 函数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#58> <span class=md-ellipsis> 5.8 连接字符串 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#59> <span class=md-ellipsis> 5.9 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#06_1> <span class=md-ellipsis> 06 使用库算法 </span> </a> <nav aria-label="06 使用库算法" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#61> <span class=md-ellipsis> 6.1 分析字符串 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#62> <span class=md-ellipsis> 6.2 对计算成绩的方案进行比较 (可读性很差) </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#65> <span class=md-ellipsis> 6.5 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#07_1> <span class=md-ellipsis> 07 使用关联容器 </span> </a> <nav aria-label="07 使用关联容器" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#71> <span class=md-ellipsis> 7.1 支持高效查找的容器 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#72> <span class=md-ellipsis> 7.2 计算单词数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#73> <span class=md-ellipsis> 7.3 产生一个交叉引用表 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#74> <span class=md-ellipsis> 7.4 生成句子 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#75> <span class=md-ellipsis> 7.5 关于性能的说明 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#76> <span class=md-ellipsis> 7.6 小结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#08_1> <span class=md-ellipsis> 08 编写泛型函数 </span> </a> <nav aria-label="08 编写泛型函数" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#81> <span class=md-ellipsis> 8.1 泛型函数是什么 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#82> <span class=md-ellipsis> 8.2 数据结构独立性 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#09> <span class=md-ellipsis> 09 定义新类型 </span> </a> <nav aria-label="09 定义新类型" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#91-student_info> <span class=md-ellipsis> 9.1 回顾一下 Student_info </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#92> <span class=md-ellipsis> 9.2 自定义类型 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#93> <span class=md-ellipsis> 9.3 保护 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#94-student_info> <span class=md-ellipsis> 9.4 Student_info 类 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#95> <span class=md-ellipsis> 9.5 构造函数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#96-student_info> <span class=md-ellipsis> 9.6 使用 Student_info 类 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#97> <span class=md-ellipsis> 9.7 小结 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href=https://github.com/Auzers/notes/edit/main/docs/computer/C++/ac_cpp.md title=edit.link.title> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"></path></svg> </a> <h1>速成<span><span class=heti-spacing> </span>C++</span></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"></path></svg></span> 约<span class=heti-skip><span class=heti-spacing> </span>3837<span class=heti-spacing> </span></span>个字 <span class=twemoji><svg viewbox="0 0 640 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"></path></svg></span> <span>871<span class=heti-spacing> </span></span>行代码 <span class=twemoji><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"></path></svg></span> <span>1<span class=heti-spacing> </span></span>张图片 <span class=twemoji><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"></path></svg></span> 预计阅读时间<span class=heti-skip><span class=heti-spacing> </span>30<span class=heti-spacing> </span></span>分钟</p> </div> <div class=md-typeset> <div class=blogging-tags-grid> <a class=blogging-tag href=https://Auzers.github.io/notes/tags#programming_language><code>#programming_language</code></a> </div> </div> <style>
    .md-typeset .blogging-tags-grid {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 5px;
    }

    .md-typeset .blogging-tag {
        color: var(--md-typeset-color);
        background-color: var(--md-typeset-code-color);
        white-space: nowrap;
        display: block;
    }

    .md-typeset .blogging-tag code {
        border-radius: 5px;
    }
</style> <div class="admonition note"> <ul> <li>记载了前九章内容的笔记并摘出了源码</li> <li>相关资源<ul> <li><a href=https://github.com/XWHQSJ/ebooks/blob/master/Cpp/Cpp/Accelerated%20C%2B%2B%20%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%E7%89%88%20.pdf>E-book in Cn</a></li> <li><a href=https://openzlib.link/book/20334420/b68d76/accelerated-c-practical-programming-by-example.html>E-book in En</a></li> <li><a href=https://github.com/Joyounger/accelerated_cpp><span>GitHub - Joyounger/accelerated_cpp: Accelerated C++ win-net-source<span class=heti-spacing> </span></span></a><span><span class=heti-spacing> </span></span>这个仓库包含了书中源码</li> <li><a href=https://github.com/whitevenus/Accelerated-Cpp>前四章很好的笔记</a></li> </ul> </li> <li>食用建议<ul> <li>速读原文<span class=heti-skip><span class=heti-spacing> </span>-&gt;<span class=heti-spacing> </span></span>写关键词<span class=heti-skip><span class=heti-spacing> </span>-&gt;<span class=heti-spacing> </span></span>主动回忆<span class=heti-skip><span class=heti-spacing> </span>-&gt;<span class=heti-spacing> </span></span>整合笔记</li> </ul> </li> </ul> </div> <h2 id=0-c><span>0<span class=heti-spacing> </span></span>开始学习<span><span class=heti-spacing> </span>C++</span><a class=headerlink href=#0-c title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><a href=#__codelineno-0-1><span class=linenos data-linenos="1 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><a href=#__codelineno-0-2><span class=linenos data-linenos="2 "></span></a>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><a href=#__codelineno-0-3><span class=linenos data-linenos="3 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><a href=#__codelineno-0-4><span class=linenos data-linenos="4 "></span></a><span class=p>{</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><a href=#__codelineno-0-5><span class=linenos data-linenos="5 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Hello, world!"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><a href=#__codelineno-0-6><span class=linenos data-linenos="6 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7></a><a href=#__codelineno-0-7><span class=linenos data-linenos="7 "></span></a><span class=p>}</span>
</span></code></pre></div> <h3 id=01><span>0.1<span class=heti-spacing> </span></span>注释<a class=headerlink href=#01 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=02-include><span>0.2<span class=heti-spacing> </span></span><code>#include</code>指令<a class=headerlink href=#02-include title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>C++<ul> <li>语言核心</li> <li>标准库</li> </ul> </li> <li><code>#include</code> 把不在语言核心的名称包含到当前文件中，是<strong>预处理指令</strong>的一种，本质上会把其后的文件内容<strong>复制</strong>到当前文件指定的位置</li> <li><code>&lt;iostream&gt;</code> 表示对顺序或流输入<span class=heti-skip><span class=heti-spacing> </span>/<span class=heti-spacing> </span></span>输出的支持</li> </ul> <h3 id=03-main><span>0.3 main<span class=heti-spacing> </span></span>函数<a class=headerlink href=#03-main title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><strong>函数</strong>是一段具有名称的程序片段</li> <li><span>C++<span class=heti-spacing> </span></span>程序<strong>有且仅有</strong>一个 <code>main</code> 函数</li> <li><span>main<span class=heti-spacing> </span></span>函数要返回一个整数类型的值作为结果，零表示成功，其他任意意味着程序运行有问题</li> <li><code>int</code> 是语言核心内用于表示整数的名称</li> </ul> <h3 id=04><span>0.4<span class=heti-spacing> </span></span>花括号<a class=headerlink href=#04 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><span>C++<span class=heti-spacing> </span></span>中，编译器把出现在花括号之间的所有内容当作一个单元处理，这个单元就是<strong>栈帧</strong></li> </ul> <h3 id=05><span>0.5<span class=heti-spacing> </span></span>使用标准库进行输出<a class=headerlink href=#05 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>名字空间是一个相关名称的集合</li> <li><code>std::cout</code> ：名称之前的 <code>std::</code> 表明 <code>cout</code> 是名为<span class=heti-skip><span class=heti-spacing> </span>std<span class=heti-spacing> </span></span>的名字空间的一部分</li> <li><code>std::cout</code> 是<strong>标准输出流</strong>，标准输出流是<span class=heti-skip><span class=heti-spacing> </span>C++<span class=heti-spacing> </span></span>实现用来进行普通的程序输出的工具。在<strong>窗口操作系统环境下</strong>的一个典型的<span class=heti-skip><span class=heti-spacing> </span>C++<span class=heti-spacing> </span></span>实现中，在程序运行时，系统环境会把程序和一个窗口<strong>联系起来</strong>， <code>std::cout</code> 指示了这个窗口</li> <li><code>std::endl</code>表示一个<strong>语句行的结束</strong>。这意味着如果后续还有输出，则会在新一行中开始</li> </ul> <h3 id=06><span>0.6<span class=heti-spacing> </span></span>返回语句<a class=headerlink href=#06 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>如 <code>return 0;</code></li> <li>返回值的类型必须和<strong>函数声明的返回类型一致</strong></li> <li>接受<span class=heti-skip><span class=heti-spacing> </span>main<span class=heti-spacing> </span></span>的返回值的程序是<span class=heti-skip><span class=heti-spacing> </span>C++<span class=heti-spacing> </span></span>实现本身<span class=heti-skip><span class=heti-spacing> </span>(<span class=heti-spacing> </span></span>有点抽象<span><span class=heti-spacing> </span>...)</span></li> </ul> <h3 id=07><span>0.7<span class=heti-spacing> </span></span>深入观察<a class=headerlink href=#07 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>表达式指示<span class=heti-skip><span class=heti-spacing> </span>C++<span class=heti-spacing> </span></span>编译器对某些事物进行<strong>运算</strong>。</li> <li>运算会产生一个<strong>结果</strong><span>,<span class=heti-spacing> </span></span>并且可能有<strong>副作用</strong><span>(<span class=heti-spacing> </span></span>类似<span class=heti-skip><span class=heti-spacing> </span>python<span class=heti-spacing> </span></span>中的<strong>纯函数和非纯函数</strong>)，副作用不作为表达式额直接结果，但是会影响程序或系统环境的状态。如果在表达式后紧跟分号，表示让系统丢掉该表达式的结果，表示我们只对该表达式的副作用关心。</li> <li>例如 <code>3 + 4</code> 这个运算的结果是<span class=heti-skip><span class=heti-spacing> </span>7<span class=heti-spacing> </span></span>但是没有副作用。</li> <li>表达式包含<strong>运算符</strong>和<strong>操作数</strong></li> <li>每个操作数都具有<strong>类型</strong>， <code>std::cout</code> 的类型就是 <code>std::ostream</code></li> <li>C++ <ul> <li>内建模型，如 <code>int</code></li> <li>语言模型之外的其他类型</li> </ul> </li> <li><code>std::endl</code> 本质上是一个<strong>控制器</strong></li> <li><strong>控制器</strong>的关键性质：把控制器写到流中，我们就可以控制这个流。</li> <li>就 <code>std::endl</code> 而言，我们所作的动作是结束当前的<strong>输出行</strong></li> <li><code>std::cout &lt;&lt; "Hello, World!" &lt;&lt; std::endl;</code>会产生一个类型为<code>std::ostream</code>的<code>std::cout</code>作为其结果（这也是为什么可以进行<strong>链式调用</strong>的原因<heti-adjacent class=heti-adjacent-half>）</heti-adjacent>，作为副作用，它会将<span class=heti-skip><span class=heti-spacing> </span>Hello, World!<span class=heti-spacing> </span></span>写入标准输出中并结束当前输出行。</li> <li><strong>作用域</strong>是用来<strong>避免名称冲突</strong>的手段</li> <li><strong>名字空间作用域：</strong> <code>std::cout</code> 是一种<strong>限定名称</strong>，其中 <code>::</code> 是<strong>作用域运算符</strong></li> <li>花括号是另一种作用域</li> </ul> <h3 id=08><span>0.8<span class=heti-spacing> </span></span>小结<a class=headerlink href=#08 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><span>C++<span class=heti-spacing> </span></span>程序通常具有<strong>自由风格</strong></li> <li><strong>自由风格</strong>：防止相邻名称混在一起时必须使用空白的编码风格</li> <li>三个不能具有自由风格的例外<span class=heti-skip><span class=heti-spacing> </span>(<span class=heti-spacing> </span></span>不可以跨行<span><span class=heti-spacing> </span>)</span><ul> <li>字符串直接量</li> <li><code>#include</code> 名称</li> <li><code>//</code> 注释</li> </ul> </li> </ul> <h2 id=01-c><span>01<span class=heti-spacing> </span></span>开始学习<span><span class=heti-spacing> </span>C++</span><a class=headerlink href=#01-c title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=11><span>1.1<span class=heti-spacing> </span></span>输入<a class=headerlink href=#11 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a><a href=#__codelineno-1-1><span class=linenos data-linenos=" 1 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><a href=#__codelineno-1-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><a href=#__codelineno-1-3><span class=linenos data-linenos=" 3 "></span></a>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><a href=#__codelineno-1-4><span class=linenos data-linenos=" 4 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><a href=#__codelineno-1-5><span class=linenos data-linenos=" 5 "></span></a><span class=p>{</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6></a><a href=#__codelineno-1-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Please enter your first name: "</span><span class=p>;</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7></a><a href=#__codelineno-1-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8></a><a href=#__codelineno-1-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9></a><a href=#__codelineno-1-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10></a><a href=#__codelineno-1-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Hello, "</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>"!"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11></a><a href=#__codelineno-1-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12></a><a href=#__codelineno-1-12><span class=linenos data-linenos="12 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><strong>变量</strong>：具有名称的对象。有的对象可能没有名称。</li> <li><strong>对象</strong>是计算机中一段具有类型的内存空间。</li> <li>定义变量，<strong>名称</strong> + <strong>类型</strong>， <code>std::string name</code> 定义了一个类型为 <code>std::string</code> 的变量 <code>name</code></li> <li><code>std::string</code> 定义在标准头 <code>&lt;string&gt;</code> 中，变量<span class=heti-skip><span class=heti-spacing> </span>name<span class=heti-spacing> </span></span>定义在<span class=heti-skip><span class=heti-spacing> </span>main<span class=heti-spacing> </span></span>函数中，表示<span class=heti-skip><span class=heti-spacing> </span>name<span class=heti-spacing> </span></span>是一个 <strong>局部变量</strong></li> <li>局部变量的生存期是大括号内</li> <li><strong>接口</strong>是某类型对象可实现操作的集合</li> <li>定义一个类型为<code>string</code>的具名对象<span><span class=heti-spacing> </span>name</span>，则表示能够对<span class=heti-skip><span class=heti-spacing> </span>name<span class=heti-spacing> </span></span>做库所允许对<code>string</code>类型对象做的所有操作</li> <li>其中一个操作是初始化，标准库要求每一个<code>string</code>类型对象都有一个初始值，这意味着如果不显示为<code>string</code>类型对象指定值，则系统环境会对该对象进行<strong>隐式初始化</strong>，这样的对象就是一个不含任何字符的<strong>空串</strong>。</li> <li><strong>输入语句</strong><ul> <li>就<code>std::cin &gt;&gt; name</code>而言，<code>&gt;&gt;</code>运算符会从<strong>标准输入</strong>读入一个字符串并将其存储在<span class=heti-skip><span class=heti-spacing> </span>name<span class=heti-spacing> </span></span>变量中。该表达式的结果是<code>std::cin</code>，这表明其也支持<strong>链式调用</strong>。</li> <li>它会略去输入开始所碰到的<strong>空白字符</strong>（例如换行符、制表符等等<heti-adjacent class=heti-adjacent-half>）</heti-adjacent>，之后会连续读入<strong>字符</strong>到变量<span class=heti-skip><span class=heti-spacing> </span>name<span class=heti-spacing> </span></span>中，直到遇到其他空白字符或<strong>文件结束标记</strong>。</li> </ul> </li> <li><strong>缓冲区<span><span class=heti-spacing> </span>(buffer)</span></strong><ul> <li>通常，输入<span class=heti-skip><span class=heti-spacing> </span>/<span class=heti-spacing> </span></span>输出操作会将它的输出保存在<strong>缓冲区</strong>这样的内部数据结构中。</li> <li>缓冲区是用来优化输出操作的，只有在<strong>必要的时候</strong>，系统才会把缓冲区的内容写入到输出装置中，从而<strong>刷新缓冲区</strong>。这样就可以把几个输出操作合并到一个单独的写操作中了。</li> <li><strong>缓冲区刷新</strong><ul> <li>缓冲区满了</li> <li>请求从<strong>标准输入</strong>中读取数据</li> <li>明确要求刷新，如<code>std::flush</code><span><span class=heti-spacing> </span>,</span> <code>std::endl</code></li> </ul> </li> </ul> </li> </ul> <h3 id=12><span>1.2<span class=heti-spacing> </span></span>为姓名装框<a class=headerlink href=#12 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a><a href=#__codelineno-2-1><span class=linenos data-linenos=" 1 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a><a href=#__codelineno-2-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a><a href=#__codelineno-2-3><span class=linenos data-linenos=" 3 "></span></a>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4></a><a href=#__codelineno-2-4><span class=linenos data-linenos=" 4 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5></a><a href=#__codelineno-2-5><span class=linenos data-linenos=" 5 "></span></a><span class=p>{</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6></a><a href=#__codelineno-2-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Please enter your first name: "</span><span class=p>;</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7></a><a href=#__codelineno-2-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8></a><a href=#__codelineno-2-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9></a><a href=#__codelineno-2-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10></a><a href=#__codelineno-2-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>greeting</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"Hello, "</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>"!"</span><span class=p>;</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11></a><a href=#__codelineno-2-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>spaces</span><span class=p>(</span><span class=n>greeting</span><span class=p>.</span><span class=n>size</span><span class=p>(),</span><span class=w> </span><span class=sc>' '</span><span class=p>);</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12></a><a href=#__codelineno-2-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>second</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"* "</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>spaces</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>" *"</span><span class=p>;</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13></a><a href=#__codelineno-2-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>first</span><span class=p>(</span><span class=n>second</span><span class=p>.</span><span class=n>size</span><span class=p>(),</span><span class=w> </span><span class=sc>'*'</span><span class=p>);</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14></a><a href=#__codelineno-2-14><span class=linenos data-linenos="14 "></span></a>
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15></a><a href=#__codelineno-2-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16></a><a href=#__codelineno-2-16><span class=linenos data-linenos="16 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17></a><a href=#__codelineno-2-17><span class=linenos data-linenos="17 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>first</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18></a><a href=#__codelineno-2-18><span class=linenos data-linenos="18 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>second</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19></a><a href=#__codelineno-2-19><span class=linenos data-linenos="19 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"* "</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>greeting</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>" *"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20></a><a href=#__codelineno-2-20><span class=linenos data-linenos="20 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>second</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21></a><a href=#__codelineno-2-21><span class=linenos data-linenos="21 "></span></a><span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>first</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22></a><a href=#__codelineno-2-22><span class=linenos data-linenos="22 "></span></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23></a><a href=#__codelineno-2-23><span class=linenos data-linenos="23 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><span>C++<span class=heti-spacing> </span></span>允许使用<code>+</code><strong>连接</strong>一个字符串和一个字符串直接量或两个字符串。例如：<code>"Hello, " + name + "!"</code>。</li> <li>但 <code>+</code> 不允许连接两个字符串直接量。如<code>cout &lt;&lt; "hello," + "world" &lt;&lt; end;</code><span><span class=heti-spacing> </span>(error!!)</span></li> <li><strong>运算符重载<span><span class=heti-spacing> </span>:</span></strong> 如果一个运算符对于不同类型的操作数来说具有不同的含义，那么我们就说这个运算符被重载了，本例中 <code>+</code> 可以用于数学计算也可以用于字符串的连接，所以 <code>+</code> 被重载了。</li> <li><code>const</code> <span>:<span class=heti-spacing> </span></span>用于表示<strong>常量</strong>的关键字，对常量定义的<strong>同时</strong>必须对其进行初始化，否则将不会再有机会对其进行初始化，因为系统环境会对<code>string</code>类型对象进行<strong>隐式初始化</strong>，而常量的值不允许修改。</li> <li>另外注意到 <code>const std::string greeting = "Hello, " + name + "!"</code> ，这表示对常量的初始化值<strong>不必</strong>是一个常量。<span>(name<span class=heti-spacing> </span></span>是变量<span><span class=heti-spacing> </span>)</span></li> <li><strong>成员函数：</strong> <code>greeting.size()</code> <span>,<span class=heti-spacing> </span></span><code>string</code>类型对象内部有一个成员<span class=heti-skip><span class=heti-spacing> </span>size<span class=heti-spacing> </span></span>函数</li> <li><strong>字符直接量：</strong> 单引号 <code>' '</code> 用来表示字符直接量。其所对应的内建类型为 <code>char</code> 。</li> <li><span>C++<span class=heti-spacing> </span></span>允许根据一个整数值和一个字符值来<strong>构造字符串</strong>。</li> <li>例如<code>std::string stars(10, '*')</code>定义一个包含有<span class=heti-skip><span class=heti-spacing> </span>10<span class=heti-spacing> </span></span>个<code>'*'</code>字符的字符串<span><span class=heti-spacing> </span>starts</span> 。</li> </ul> <h3 id=13><span>1.3<span class=heti-spacing> </span></span>小结<a class=headerlink href=#13 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h2 id=02><span>02<span class=heti-spacing> </span></span>循环和计数<a class=headerlink href=#02 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=21><span>2.1<span class=heti-spacing> </span></span>问题<a class=headerlink href=#21 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a><a href=#__codelineno-3-1><span class=linenos data-linenos=" 1 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2></a><a href=#__codelineno-3-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3></a><a href=#__codelineno-3-3><span class=linenos data-linenos=" 3 "></span></a>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4></a><a href=#__codelineno-3-4><span class=linenos data-linenos=" 4 "></span></a><span class=c1>// say what standard-library names we use</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5></a><a href=#__codelineno-3-5><span class=linenos data-linenos=" 5 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cin</span><span class=p>;</span><span class=w>         </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6></a><a href=#__codelineno-3-6><span class=linenos data-linenos=" 6 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=p>;</span><span class=w>        </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>;</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7></a><a href=#__codelineno-3-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8></a><a href=#__codelineno-3-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9></a><a href=#__codelineno-3-9><span class=linenos data-linenos=" 9 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10></a><a href=#__codelineno-3-10><span class=linenos data-linenos="10 "></span></a><span class=p>{</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11></a><a href=#__codelineno-3-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=c1>// ask for the person's name</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12></a><a href=#__codelineno-3-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Please enter your first name: "</span><span class=p>;</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13></a><a href=#__codelineno-3-13><span class=linenos data-linenos="13 "></span></a>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14></a><a href=#__codelineno-3-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=c1>// read the name</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15></a><a href=#__codelineno-3-15><span class=linenos data-linenos="15 "></span></a><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16></a><a href=#__codelineno-3-16><span class=linenos data-linenos="16 "></span></a><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17></a><a href=#__codelineno-3-17><span class=linenos data-linenos="17 "></span></a>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18></a><a href=#__codelineno-3-18><span class=linenos data-linenos="18 "></span></a><span class=w>    </span><span class=c1>// build the message that we intend to write</span>
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19></a><a href=#__codelineno-3-19><span class=linenos data-linenos="19 "></span></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>greeting</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"Hello, "</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>"!"</span><span class=p>;</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20></a><a href=#__codelineno-3-20><span class=linenos data-linenos="20 "></span></a>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21></a><a href=#__codelineno-3-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=c1>// the number of blanks surrounding the greeting</span>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22></a><a href=#__codelineno-3-22><span class=linenos data-linenos="22 "></span></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>pad</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23></a><a href=#__codelineno-3-23><span class=linenos data-linenos="23 "></span></a>
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24></a><a href=#__codelineno-3-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=c1>// the number of rows and columns to write</span>
</span><span id=__span-3-25><a id=__codelineno-3-25 name=__codelineno-3-25></a><a href=#__codelineno-3-25><span class=linenos data-linenos="25 "></span></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>rows</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>pad</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>3</span><span class=p>;</span>
</span><span id=__span-3-26><a id=__codelineno-3-26 name=__codelineno-3-26></a><a href=#__codelineno-3-26><span class=linenos data-linenos="26 "></span></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>::</span><span class=n>size_type</span><span class=w> </span><span class=n>cols</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>greeting</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>pad</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-3-27><a id=__codelineno-3-27 name=__codelineno-3-27></a><a href=#__codelineno-3-27><span class=linenos data-linenos="27 "></span></a>
</span><span id=__span-3-28><a id=__codelineno-3-28 name=__codelineno-3-28></a><a href=#__codelineno-3-28><span class=linenos data-linenos="28 "></span></a><span class=w>    </span><span class=c1>// write a blank line to separate the output from the input</span>
</span><span id=__span-3-29><a id=__codelineno-3-29 name=__codelineno-3-29></a><a href=#__codelineno-3-29><span class=linenos data-linenos="29 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-3-30><a id=__codelineno-3-30 name=__codelineno-3-30></a><a href=#__codelineno-3-30><span class=linenos data-linenos="30 "></span></a>
</span><span id=__span-3-31><a id=__codelineno-3-31 name=__codelineno-3-31></a><a href=#__codelineno-3-31><span class=linenos data-linenos="31 "></span></a><span class=w>    </span><span class=c1>// write `rows' rows of output</span>
</span><span id=__span-3-32><a id=__codelineno-3-32 name=__codelineno-3-32></a><a href=#__codelineno-3-32><span class=linenos data-linenos="32 "></span></a><span class=w>    </span><span class=c1>// invariant: we have written `r' rows so far</span>
</span><span id=__span-3-33><a id=__codelineno-3-33 name=__codelineno-3-33></a><a href=#__codelineno-3-33><span class=linenos data-linenos="33 "></span></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>rows</span><span class=p>;</span><span class=w> </span><span class=o>++</span><span class=n>r</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-34><a id=__codelineno-3-34 name=__codelineno-3-34></a><a href=#__codelineno-3-34><span class=linenos data-linenos="34 "></span></a>
</span><span id=__span-3-35><a id=__codelineno-3-35 name=__codelineno-3-35></a><a href=#__codelineno-3-35><span class=linenos data-linenos="35 "></span></a><span class=w>        </span><span class=n>string</span><span class=o>::</span><span class=n>size_type</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-3-36><a id=__codelineno-3-36 name=__codelineno-3-36></a><a href=#__codelineno-3-36><span class=linenos data-linenos="36 "></span></a>
</span><span id=__span-3-37><a id=__codelineno-3-37 name=__codelineno-3-37></a><a href=#__codelineno-3-37><span class=linenos data-linenos="37 "></span></a><span class=w>        </span><span class=c1>// invariant: we have written `c' characters so far in the current row</span>
</span><span id=__span-3-38><a id=__codelineno-3-38 name=__codelineno-3-38></a><a href=#__codelineno-3-38><span class=linenos data-linenos="38 "></span></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>cols</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-39><a id=__codelineno-3-39 name=__codelineno-3-39></a><a href=#__codelineno-3-39><span class=linenos data-linenos="39 "></span></a>
</span><span id=__span-3-40><a id=__codelineno-3-40 name=__codelineno-3-40></a><a href=#__codelineno-3-40><span class=linenos data-linenos="40 "></span></a><span class=w>            </span><span class=c1>// is it time to write the greeting?</span>
</span><span id=__span-3-41><a id=__codelineno-3-41 name=__codelineno-3-41></a><a href=#__codelineno-3-41><span class=linenos data-linenos="41 "></span></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>r</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>pad</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>pad</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-42><a id=__codelineno-3-42 name=__codelineno-3-42></a><a href=#__codelineno-3-42><span class=linenos data-linenos="42 "></span></a><span class=w>                </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>greeting</span><span class=p>;</span>
</span><span id=__span-3-43><a id=__codelineno-3-43 name=__codelineno-3-43></a><a href=#__codelineno-3-43><span class=linenos data-linenos="43 "></span></a><span class=w>                </span><span class=n>c</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>greeting</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-3-44><a id=__codelineno-3-44 name=__codelineno-3-44></a><a href=#__codelineno-3-44><span class=linenos data-linenos="44 "></span></a><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-45><a id=__codelineno-3-45 name=__codelineno-3-45></a><a href=#__codelineno-3-45><span class=linenos data-linenos="45 "></span></a>
</span><span id=__span-3-46><a id=__codelineno-3-46 name=__codelineno-3-46></a><a href=#__codelineno-3-46><span class=linenos data-linenos="46 "></span></a><span class=w>                </span><span class=c1>// are we on the border?</span>
</span><span id=__span-3-47><a id=__codelineno-3-47 name=__codelineno-3-47></a><a href=#__codelineno-3-47><span class=linenos data-linenos="47 "></span></a><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>r</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>rows</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>||</span>
</span><span id=__span-3-48><a id=__codelineno-3-48 name=__codelineno-3-48></a><a href=#__codelineno-3-48><span class=linenos data-linenos="48 "></span></a><span class=w>                    </span><span class=n>c</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>cols</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-3-49><a id=__codelineno-3-49 name=__codelineno-3-49></a><a href=#__codelineno-3-49><span class=linenos data-linenos="49 "></span></a><span class=w>                    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"*"</span><span class=p>;</span>
</span><span id=__span-3-50><a id=__codelineno-3-50 name=__codelineno-3-50></a><a href=#__codelineno-3-50><span class=linenos data-linenos="50 "></span></a><span class=w>                </span><span class=k>else</span>
</span><span id=__span-3-51><a id=__codelineno-3-51 name=__codelineno-3-51></a><a href=#__codelineno-3-51><span class=linenos data-linenos="51 "></span></a><span class=w>                    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" "</span><span class=p>;</span>
</span><span id=__span-3-52><a id=__codelineno-3-52 name=__codelineno-3-52></a><a href=#__codelineno-3-52><span class=linenos data-linenos="52 "></span></a><span class=w>                </span><span class=o>++</span><span class=n>c</span><span class=p>;</span>
</span><span id=__span-3-53><a id=__codelineno-3-53 name=__codelineno-3-53></a><a href=#__codelineno-3-53><span class=linenos data-linenos="53 "></span></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-3-54><a id=__codelineno-3-54 name=__codelineno-3-54></a><a href=#__codelineno-3-54><span class=linenos data-linenos="54 "></span></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-3-55><a id=__codelineno-3-55 name=__codelineno-3-55></a><a href=#__codelineno-3-55><span class=linenos data-linenos="55 "></span></a>
</span><span id=__span-3-56><a id=__codelineno-3-56 name=__codelineno-3-56></a><a href=#__codelineno-3-56><span class=linenos data-linenos="56 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-3-57><a id=__codelineno-3-57 name=__codelineno-3-57></a><a href=#__codelineno-3-57><span class=linenos data-linenos="57 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-58><a id=__codelineno-3-58 name=__codelineno-3-58></a><a href=#__codelineno-3-58><span class=linenos data-linenos="58 "></span></a>
</span><span id=__span-3-59><a id=__codelineno-3-59 name=__codelineno-3-59></a><a href=#__codelineno-3-59><span class=linenos data-linenos="59 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-3-60><a id=__codelineno-3-60 name=__codelineno-3-60></a><a href=#__codelineno-3-60><span class=linenos data-linenos="60 "></span></a><span class=p>}</span>
</span></code></pre></div> <h3 id=22><span>2.2<span class=heti-spacing> </span></span>程序的整体结构<a class=headerlink href=#22 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=23><span>2.3<span class=heti-spacing> </span></span>输出数目未知的行<a class=headerlink href=#23 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=24><span>2.4<span class=heti-spacing> </span></span>输出一行<a class=headerlink href=#24 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=25><span>2.5<span class=heti-spacing> </span></span>完整的框架程序<a class=headerlink href=#25 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><strong><span>using<span class=heti-spacing> </span></span>声明</strong>： <code>using std::cout</code>这个声明可以实现<strong>仅一次</strong>的说明<code>cout</code>这个名称是来自于<code>std</code>这个名称空间的，从而<strong>避免重复使用<code>std::</code></strong>，当然这同时隐含着<span class=heti-skip><span class=heti-spacing> </span>"<span class=heti-spacing> </span></span>我们不会定义自己的<code>cout</code><span class=heti-skip><span class=heti-spacing> </span>"<span class=heti-spacing> </span></span>这一信息</li> <li>使用<code>using</code>声明的名称与其他名称具有同样的特性，例如在大括号中使用<code>using</code>声明的名称其生存期自定义开始，到大括号结束。</li> <li><strong>短路现象</strong>：<ul> <li><code>condition1 || condition2</code> <span>,<span class=heti-spacing> </span></span>如果<span class=heti-skip><span class=heti-spacing> </span>condition1<span class=heti-spacing> </span></span>为真，后续不再执行</li> <li><code>condition1 &amp;&amp; condition2</code> <span>,<span class=heti-spacing> </span></span>如果<span class=heti-skip><span class=heti-spacing> </span>condition1<span class=heti-spacing> </span></span>为假，后续不再执行</li> </ul> </li> </ul> <h3 id=26><span>2.6<span class=heti-spacing> </span></span>计数<a class=headerlink href=#26 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=27><span>2.7<span class=heti-spacing> </span></span>小结<a class=headerlink href=#27 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>操作数组合方式<span class=heti-skip><span class=heti-spacing> </span>--<span class=heti-spacing> </span></span>运算符的优先级和结合性决定。</li> <li>操作数怎样被转换为其他类型</li> <li>操作数的运算次序</li> </ul> <h2 id=03><span>03<span class=heti-spacing> </span></span>使用批量数据<a class=headerlink href=#03 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a><a href=#__codelineno-4-1><span class=linenos data-linenos=" 1 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2></a><a href=#__codelineno-4-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3></a><a href=#__codelineno-4-3><span class=linenos data-linenos=" 3 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;ios&gt;</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4></a><a href=#__codelineno-4-4><span class=linenos data-linenos=" 4 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iomanip&gt;</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5></a><a href=#__codelineno-4-5><span class=linenos data-linenos=" 5 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=p>;</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>;</span><span class=w> </span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6></a><a href=#__codelineno-4-6><span class=linenos data-linenos=" 6 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cin</span><span class=p>;</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w> </span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7></a><a href=#__codelineno-4-7><span class=linenos data-linenos=" 7 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>streamsize</span><span class=p>;</span><span class=w>  </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>setprecision</span><span class=p>;</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8></a><a href=#__codelineno-4-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9></a><a href=#__codelineno-4-9><span class=linenos data-linenos=" 9 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10></a><a href=#__codelineno-4-10><span class=linenos data-linenos="10 "></span></a><span class=p>{</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11></a><a href=#__codelineno-4-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Please enter your first name: "</span><span class=p>;</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12></a><a href=#__codelineno-4-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13></a><a href=#__codelineno-4-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14></a><a href=#__codelineno-4-14><span class=linenos data-linenos="14 "></span></a><span class=w>  </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Hello, "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"!"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15></a><a href=#__codelineno-4-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16></a><a href=#__codelineno-4-16><span class=linenos data-linenos="16 "></span></a><span class=w>  </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Please enter your midterm and final exam grades: "</span><span class=p>;</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17></a><a href=#__codelineno-4-17><span class=linenos data-linenos="17 "></span></a><span class=w>  </span><span class=kt>double</span><span class=w> </span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18></a><a href=#__codelineno-4-18><span class=linenos data-linenos="18 "></span></a><span class=w>  </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>midterm</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19></a><a href=#__codelineno-4-19><span class=linenos data-linenos="19 "></span></a>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20></a><a href=#__codelineno-4-20><span class=linenos data-linenos="20 "></span></a><span class=w>  </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Enter all your homework grades, "</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21></a><a href=#__codelineno-4-21><span class=linenos data-linenos="21 "></span></a><span class=w>          </span><span class=s>"followed by end-of-file: "</span><span class=p>;</span>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22></a><a href=#__codelineno-4-22><span class=linenos data-linenos="22 "></span></a><span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>count</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23></a><a href=#__codelineno-4-23><span class=linenos data-linenos="23 "></span></a><span class=w>  </span><span class=kt>double</span><span class=w> </span><span class=n>sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24></a><a href=#__codelineno-4-24><span class=linenos data-linenos="24 "></span></a><span class=w>  </span><span class=kt>double</span><span class=w> </span><span class=n>x</span><span class=p>;</span>
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25></a><a href=#__codelineno-4-25><span class=linenos data-linenos="25 "></span></a><span class=w>  </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>x</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26></a><a href=#__codelineno-4-26><span class=linenos data-linenos="26 "></span></a><span class=w>    </span><span class=o>++</span><span class=n>count</span><span class=p>;</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27></a><a href=#__codelineno-4-27><span class=linenos data-linenos="27 "></span></a><span class=w>    </span><span class=n>sum</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>x</span><span class=p>;</span>
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28></a><a href=#__codelineno-4-28><span class=linenos data-linenos="28 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29></a><a href=#__codelineno-4-29><span class=linenos data-linenos="29 "></span></a>
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30></a><a href=#__codelineno-4-30><span class=linenos data-linenos="30 "></span></a><span class=w>  </span><span class=n>streamsize</span><span class=w> </span><span class=n>prec</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cout</span><span class=p>.</span><span class=n>precision</span><span class=p>();</span>
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31></a><a href=#__codelineno-4-31><span class=linenos data-linenos="31 "></span></a><span class=w>  </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Your final grade is "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span><span id=__span-4-32><a id=__codelineno-4-32 name=__codelineno-4-32></a><a href=#__codelineno-4-32><span class=linenos data-linenos="32 "></span></a><span class=w>       </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=mf>0.2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>midterm</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.4</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>final</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.4</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sum</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>count</span>
</span><span id=__span-4-33><a id=__codelineno-4-33 name=__codelineno-4-33></a><a href=#__codelineno-4-33><span class=linenos data-linenos="33 "></span></a><span class=w>       </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=n>prec</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-4-34><a id=__codelineno-4-34 name=__codelineno-4-34></a><a href=#__codelineno-4-34><span class=linenos data-linenos="34 "></span></a>
</span><span id=__span-4-35><a id=__codelineno-4-35 name=__codelineno-4-35></a><a href=#__codelineno-4-35><span class=linenos data-linenos="35 "></span></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-36><a id=__codelineno-4-36 name=__codelineno-4-36></a><a href=#__codelineno-4-36><span class=linenos data-linenos="36 "></span></a><span class=p>}</span>
</span></code></pre></div> <h3 id=31><span>3.1<span class=heti-spacing> </span></span>计算学生成绩<a class=headerlink href=#31 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>两个以上字符串直接量仅仅被空白符分隔开，那么这些字符串直接量就会被自动连接到一起。</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a><a href=#__codelineno-5-1><span class=linenos data-linenos="1 "></span></a><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Enter all your homework grades, "</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2></a><a href=#__codelineno-5-2><span class=linenos data-linenos="2 "></span></a><span class=w>          </span><span class=s>"followed by end-of-file: "</span><span class=p>;</span>
</span></code></pre></div> <p>和</p> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a><a href=#__codelineno-6-1><span class=linenos data-linenos="1 "></span></a><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Enter all your homework grades, followed by end-of-file: "</span><span class=p>;</span>
</span></code></pre></div> <p>等价。</p> <ul> <li><strong>缺省初始化</strong><ul> <li>对于自定义类型，例如<code>string</code>，当我们在声明该类型变量的同时不进行初始化赋值操作，则该类型会自动的被隐含初始化为空字符串。</li> <li>但是定义<strong>内置类型的局部变量</strong>时，系统并不会提供该便利。这意味着我们在定义基本类型的变量时，需要手动为其进行初始化，否则可能会导致程序出现意想不到的错误。</li> <li>错误指：系统给这些变量分配适当的内存单元，而变量的值就有这些单元中的随机信息组成。</li> </ul> </li> <li><code>setprecision</code><ul> <li>位于头文件<code>&lt;iomanip&gt;</code>中，用于指明输出所包含的有效位数。</li> <li>是一个控制器，为流的后继输出设置了一个特定的<strong>有效位数</strong></li> </ul> </li> <li><code>streamsize</code><ul> <li>位于头文件<code>&lt;ios&gt;</code>中，输入输出使用该类型表示长度</li> </ul> </li> <li><code>precision</code> <ul> <li><span>cout<span class=heti-spacing> </span></span>的成员函数，用于返回流在输出浮点数时所使用的精度。</li> </ul> </li> <li><code>cin &gt;&gt; x</code> 作为条件：<ul> <li>类<span class=heti-skip><span class=heti-spacing> </span>istream<span class=heti-spacing> </span></span>提供了一个转换来把<span class=heti-skip><span class=heti-spacing> </span>cin<span class=heti-spacing> </span></span>转换成一个可以在条件中使用的值。</li> <li>用<span class=heti-skip><span class=heti-spacing> </span>cin<span class=heti-spacing> </span></span>作为条件等价于检测最近一次从<span class=heti-skip><span class=heti-spacing> </span>cin<span class=heti-spacing> </span></span>读数据的尝试是否成功。</li> <li>以下情况可能会失败<ul> <li>到达输入文件的末尾</li> <li>输入和试图读取的变量不一致</li> <li>系统在输入装置中检测到一个硬件问题</li> </ul> </li> </ul> </li> </ul> <h3 id=32><span>3.2<span class=heti-spacing> </span></span>中值代替平均值<a class=headerlink href=#32 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a><a href=#__codelineno-7-1><span class=linenos data-linenos=" 1 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;algorithm&gt;</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a><a href=#__codelineno-7-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iomanip&gt;</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a><a href=#__codelineno-7-3><span class=linenos data-linenos=" 3 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;ios&gt;</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4></a><a href=#__codelineno-7-4><span class=linenos data-linenos=" 4 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5></a><a href=#__codelineno-7-5><span class=linenos data-linenos=" 5 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6></a><a href=#__codelineno-7-6><span class=linenos data-linenos=" 6 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;vector&gt;</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7></a><a href=#__codelineno-7-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8></a><a href=#__codelineno-7-8><span class=linenos data-linenos=" 8 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cin</span><span class=p>;</span><span class=w>             </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>sort</span><span class=p>;</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9></a><a href=#__codelineno-7-9><span class=linenos data-linenos=" 9 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=p>;</span><span class=w>            </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>streamsize</span><span class=p>;</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10></a><a href=#__codelineno-7-10><span class=linenos data-linenos="10 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w>            </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>;</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11></a><a href=#__codelineno-7-11><span class=linenos data-linenos="11 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>setprecision</span><span class=p>;</span><span class=w>    </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=p>;</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12></a><a href=#__codelineno-7-12><span class=linenos data-linenos="12 "></span></a>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13></a><a href=#__codelineno-7-13><span class=linenos data-linenos="13 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14></a><a href=#__codelineno-7-14><span class=linenos data-linenos="14 "></span></a><span class=p>{</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15></a><a href=#__codelineno-7-15><span class=linenos data-linenos="15 "></span></a><span class=w>    </span><span class=c1>// ask for and read the student's name</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16></a><a href=#__codelineno-7-16><span class=linenos data-linenos="16 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Please enter your first name: "</span><span class=p>;</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17></a><a href=#__codelineno-7-17><span class=linenos data-linenos="17 "></span></a><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18></a><a href=#__codelineno-7-18><span class=linenos data-linenos="18 "></span></a><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19></a><a href=#__codelineno-7-19><span class=linenos data-linenos="19 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Hello, "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"!"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20></a><a href=#__codelineno-7-20><span class=linenos data-linenos="20 "></span></a>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21></a><a href=#__codelineno-7-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=c1>// ask for and read the midterm and final grades</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22></a><a href=#__codelineno-7-22><span class=linenos data-linenos="22 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Please enter your midterm and final exam grades: "</span><span class=p>;</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23></a><a href=#__codelineno-7-23><span class=linenos data-linenos="23 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24></a><a href=#__codelineno-7-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>midterm</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25></a><a href=#__codelineno-7-25><span class=linenos data-linenos="25 "></span></a>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26></a><a href=#__codelineno-7-26><span class=linenos data-linenos="26 "></span></a><span class=w>    </span><span class=c1>// ask for and read the homework grades</span>
</span><span id=__span-7-27><a id=__codelineno-7-27 name=__codelineno-7-27></a><a href=#__codelineno-7-27><span class=linenos data-linenos="27 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Enter all your homework grades, "</span>
</span><span id=__span-7-28><a id=__codelineno-7-28 name=__codelineno-7-28></a><a href=#__codelineno-7-28><span class=linenos data-linenos="28 "></span></a><span class=w>            </span><span class=s>"followed by end-of-file: "</span><span class=p>;</span>
</span><span id=__span-7-29><a id=__codelineno-7-29 name=__codelineno-7-29></a><a href=#__codelineno-7-29><span class=linenos data-linenos="29 "></span></a>
</span><span id=__span-7-30><a id=__codelineno-7-30 name=__codelineno-7-30></a><a href=#__codelineno-7-30><span class=linenos data-linenos="30 "></span></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=w> </span><span class=n>homework</span><span class=p>;</span>
</span><span id=__span-7-31><a id=__codelineno-7-31 name=__codelineno-7-31></a><a href=#__codelineno-7-31><span class=linenos data-linenos="31 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>x</span><span class=p>;</span>
</span><span id=__span-7-32><a id=__codelineno-7-32 name=__codelineno-7-32></a><a href=#__codelineno-7-32><span class=linenos data-linenos="32 "></span></a><span class=w>    </span><span class=c1>// invariant: `homework' contains all the homework grades read so far</span>
</span><span id=__span-7-33><a id=__codelineno-7-33 name=__codelineno-7-33></a><a href=#__codelineno-7-33><span class=linenos data-linenos="33 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>x</span><span class=p>)</span>
</span><span id=__span-7-34><a id=__codelineno-7-34 name=__codelineno-7-34></a><a href=#__codelineno-7-34><span class=linenos data-linenos="34 "></span></a><span class=w>        </span><span class=n>homework</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span><span id=__span-7-35><a id=__codelineno-7-35 name=__codelineno-7-35></a><a href=#__codelineno-7-35><span class=linenos data-linenos="35 "></span></a>
</span><span id=__span-7-36><a id=__codelineno-7-36 name=__codelineno-7-36></a><a href=#__codelineno-7-36><span class=linenos data-linenos="36 "></span></a><span class=w>    </span><span class=c1>// check that the student entered some homework grades</span>
</span><span id=__span-7-37><a id=__codelineno-7-37 name=__codelineno-7-37></a><a href=#__codelineno-7-37><span class=linenos data-linenos="37 "></span></a><span class=w>    </span><span class=k>typedef</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;::</span><span class=n>size_type</span><span class=w> </span><span class=n>vec_sz</span><span class=p>;</span>
</span><span id=__span-7-38><a id=__codelineno-7-38 name=__codelineno-7-38></a><a href=#__codelineno-7-38><span class=linenos data-linenos="38 "></span></a><span class=w>    </span><span class=n>vec_sz</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>homework</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-7-39><a id=__codelineno-7-39 name=__codelineno-7-39></a><a href=#__codelineno-7-39><span class=linenos data-linenos="39 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-40><a id=__codelineno-7-40 name=__codelineno-7-40></a><a href=#__codelineno-7-40><span class=linenos data-linenos="40 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"You must enter your grades.  "</span>
</span><span id=__span-7-41><a id=__codelineno-7-41 name=__codelineno-7-41></a><a href=#__codelineno-7-41><span class=linenos data-linenos="41 "></span></a><span class=w>                        </span><span class=s>"Please try again."</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span><span class=w>    </span>
</span><span id=__span-7-42><a id=__codelineno-7-42 name=__codelineno-7-42></a><a href=#__codelineno-7-42><span class=linenos data-linenos="42 "></span></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-7-43><a id=__codelineno-7-43 name=__codelineno-7-43></a><a href=#__codelineno-7-43><span class=linenos data-linenos="43 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-7-44><a id=__codelineno-7-44 name=__codelineno-7-44></a><a href=#__codelineno-7-44><span class=linenos data-linenos="44 "></span></a>
</span><span id=__span-7-45><a id=__codelineno-7-45 name=__codelineno-7-45></a><a href=#__codelineno-7-45><span class=linenos data-linenos="45 "></span></a><span class=w>    </span><span class=c1>// sort the grades</span>
</span><span id=__span-7-46><a id=__codelineno-7-46 name=__codelineno-7-46></a><a href=#__codelineno-7-46><span class=linenos data-linenos="46 "></span></a><span class=w>    </span><span class=n>sort</span><span class=p>(</span><span class=n>homework</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>homework</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
</span><span id=__span-7-47><a id=__codelineno-7-47 name=__codelineno-7-47></a><a href=#__codelineno-7-47><span class=linenos data-linenos="47 "></span></a>
</span><span id=__span-7-48><a id=__codelineno-7-48 name=__codelineno-7-48></a><a href=#__codelineno-7-48><span class=linenos data-linenos="48 "></span></a><span class=w>    </span><span class=c1>// compute the median homework grade</span>
</span><span id=__span-7-49><a id=__codelineno-7-49 name=__codelineno-7-49></a><a href=#__codelineno-7-49><span class=linenos data-linenos="49 "></span></a><span class=w>    </span><span class=n>vec_sz</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=o>/</span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-7-50><a id=__codelineno-7-50 name=__codelineno-7-50></a><a href=#__codelineno-7-50><span class=linenos data-linenos="50 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>median</span><span class=p>;</span>
</span><span id=__span-7-51><a id=__codelineno-7-51 name=__codelineno-7-51></a><a href=#__codelineno-7-51><span class=linenos data-linenos="51 "></span></a><span class=w>    </span><span class=n>median</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span><span class=n>homework</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>homework</span><span class=p>[</span><span class=n>mid</span><span class=mi>-1</span><span class=p>])</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>2</span>
</span><span id=__span-7-52><a id=__codelineno-7-52 name=__codelineno-7-52></a><a href=#__codelineno-7-52><span class=linenos data-linenos="52 "></span></a><span class=w>                           </span><span class=o>:</span><span class=w> </span><span class=n>homework</span><span class=p>[</span><span class=n>mid</span><span class=p>];</span>
</span><span id=__span-7-53><a id=__codelineno-7-53 name=__codelineno-7-53></a><a href=#__codelineno-7-53><span class=linenos data-linenos="53 "></span></a>
</span><span id=__span-7-54><a id=__codelineno-7-54 name=__codelineno-7-54></a><a href=#__codelineno-7-54><span class=linenos data-linenos="54 "></span></a><span class=w>    </span><span class=c1>// compute and write the final grade</span>
</span><span id=__span-7-55><a id=__codelineno-7-55 name=__codelineno-7-55></a><a href=#__codelineno-7-55><span class=linenos data-linenos="55 "></span></a><span class=w>    </span><span class=n>streamsize</span><span class=w> </span><span class=n>prec</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cout</span><span class=p>.</span><span class=n>precision</span><span class=p>();</span>
</span><span id=__span-7-56><a id=__codelineno-7-56 name=__codelineno-7-56></a><a href=#__codelineno-7-56><span class=linenos data-linenos="56 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Your final grade is "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span><span id=__span-7-57><a id=__codelineno-7-57 name=__codelineno-7-57></a><a href=#__codelineno-7-57><span class=linenos data-linenos="57 "></span></a><span class=w>         </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=mf>0.2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>midterm</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.4</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>final</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.4</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>median</span>
</span><span id=__span-7-58><a id=__codelineno-7-58 name=__codelineno-7-58></a><a href=#__codelineno-7-58><span class=linenos data-linenos="58 "></span></a><span class=w>         </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=n>prec</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-7-59><a id=__codelineno-7-59 name=__codelineno-7-59></a><a href=#__codelineno-7-59><span class=linenos data-linenos="59 "></span></a>
</span><span id=__span-7-60><a id=__codelineno-7-60 name=__codelineno-7-60></a><a href=#__codelineno-7-60><span class=linenos data-linenos="60 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-7-61><a id=__codelineno-7-61 name=__codelineno-7-61></a><a href=#__codelineno-7-61><span class=linenos data-linenos="61 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li>中值避免了一些糟糕的成绩让平均成绩下降太多</li> <li><code>vector</code> 类型表示向量，长度可变</li> <li><code>vector&lt;double&gt;::size_type</code> 是一个<span class=heti-skip><span class=heti-spacing> </span>unsigned<span class=heti-spacing> </span></span>类型，保存向量长度。</li> <li><code>type_def</code> 把<span class=heti-skip><span class=heti-spacing> </span>vec_sz<span class=heti-spacing> </span></span>设置成了 <code>vector&lt;double&gt;::size_type</code> 的替代名</li> <li><span>sort --<span class=heti-spacing> </span></span>排序</li> <li>普通整数和无符号整数结合，普通整数会被转换成无符号整数</li> <li><span>C++<span class=heti-spacing> </span></span>强调速度，为注重性能的应用服务</li> </ul> <h2 id=04_1><span>04<span class=heti-spacing> </span></span>组织程序和数据<a class=headerlink href=#04_1 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=41><span>4.1<span class=heti-spacing> </span></span>组织计算<a class=headerlink href=#41 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a><a href=#__codelineno-8-1><span class=linenos data-linenos=" 1 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdexcept&gt;</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2></a><a href=#__codelineno-8-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;vector&gt;</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3></a><a href=#__codelineno-8-3><span class=linenos data-linenos=" 3 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>"grade.h"</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4></a><a href=#__codelineno-8-4><span class=linenos data-linenos=" 4 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>"median.h"</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5></a><a href=#__codelineno-8-5><span class=linenos data-linenos=" 5 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>"Student_info.h"</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6></a><a href=#__codelineno-8-6><span class=linenos data-linenos=" 6 "></span></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7></a><a href=#__codelineno-8-7><span class=linenos data-linenos=" 7 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>domain_error</span><span class=p>;</span><span class=w>  </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=p>;</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8></a><a href=#__codelineno-8-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9></a><a href=#__codelineno-8-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10></a><a href=#__codelineno-8-10><span class=linenos data-linenos="10 "></span></a><span class=c1>// compute a student's overall grade from midterm and final exam grades and homework grade</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11></a><a href=#__codelineno-8-11><span class=linenos data-linenos="11 "></span></a><span class=kt>double</span><span class=w> </span><span class=nf>grade</span><span class=p>(</span><span class=kt>double</span><span class=w> </span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=k>final</span><span class=p>,</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=n>homework</span><span class=p>)</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12></a><a href=#__codelineno-8-12><span class=linenos data-linenos="12 "></span></a><span class=p>{</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13></a><a href=#__codelineno-8-13><span class=linenos data-linenos="13 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mf>0.2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>midterm</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.4</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>final</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.4</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>homework</span><span class=p>;</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14></a><a href=#__codelineno-8-14><span class=linenos data-linenos="14 "></span></a><span class=p>}</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15></a><a href=#__codelineno-8-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16></a><a href=#__codelineno-8-16><span class=linenos data-linenos="16 "></span></a><span class=c1>// compute a student's overall grade from midterm and final exam grades</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17></a><a href=#__codelineno-8-17><span class=linenos data-linenos="17 "></span></a><span class=c1>// and vector of homework grades.</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18></a><a href=#__codelineno-8-18><span class=linenos data-linenos="18 "></span></a><span class=c1>// this function does not copy its argument, because `median' does so for us.</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19></a><a href=#__codelineno-8-19><span class=linenos data-linenos="19 "></span></a><span class=kt>double</span><span class=w> </span><span class=nf>grade</span><span class=p>(</span><span class=kt>double</span><span class=w> </span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=k>final</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&amp;</span><span class=w> </span><span class=n>hw</span><span class=p>)</span>
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20></a><a href=#__codelineno-8-20><span class=linenos data-linenos="20 "></span></a><span class=p>{</span>
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21></a><a href=#__codelineno-8-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>hw</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22></a><a href=#__codelineno-8-22><span class=linenos data-linenos="22 "></span></a><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>domain_error</span><span class=p>(</span><span class=s>"student has done no homework"</span><span class=p>);</span>
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23></a><a href=#__codelineno-8-23><span class=linenos data-linenos="23 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>grade</span><span class=p>(</span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>,</span><span class=w> </span><span class=n>median</span><span class=p>(</span><span class=n>hw</span><span class=p>));</span>
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24></a><a href=#__codelineno-8-24><span class=linenos data-linenos="24 "></span></a><span class=p>}</span>
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25></a><a href=#__codelineno-8-25><span class=linenos data-linenos="25 "></span></a>
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26></a><a href=#__codelineno-8-26><span class=linenos data-linenos="26 "></span></a><span class=kt>double</span><span class=w> </span><span class=nf>grade</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Student_info</span><span class=o>&amp;</span><span class=w> </span><span class=n>s</span><span class=p>)</span>
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27></a><a href=#__codelineno-8-27><span class=linenos data-linenos="27 "></span></a><span class=p>{</span>
</span><span id=__span-8-28><a id=__codelineno-8-28 name=__codelineno-8-28></a><a href=#__codelineno-8-28><span class=linenos data-linenos="28 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>grade</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=k>final</span><span class=p>,</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>homework</span><span class=p>);</span>
</span><span id=__span-8-29><a id=__codelineno-8-29 name=__codelineno-8-29></a><a href=#__codelineno-8-29><span class=linenos data-linenos="29 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><strong>按值调用</strong><span>:<span class=heti-spacing> </span></span>参数获得的只是参数值的一个复制，<code>double grade(double midterm, double final, double homework)</code></li> <li><strong>引用</strong>： <code>vector&lt;double&gt;&amp; hw</code> 对<span class=heti-skip><span class=heti-spacing> </span>hw<span class=heti-spacing> </span></span>操作相当于对<span class=heti-skip><span class=heti-spacing> </span>homework<span class=heti-spacing> </span></span>操作</li> <li><strong>异常</strong>： </li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a><a href=#__codelineno-9-1><span class=linenos data-linenos="1 "></span></a><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>hw</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2></a><a href=#__codelineno-9-2><span class=linenos data-linenos="2 "></span></a><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>domain_error</span><span class=p>(</span><span class=s>"student has done no homework"</span><span class=p>);</span>
</span></code></pre></div> <ul> <li>如果向量为空就<strong>抛出一个异常</strong>，程序会在抛出异常的地方<strong>中止执行</strong>并转移到程序的另一部分<span class=heti-skip><span class=heti-spacing> </span>(<span class=heti-spacing> </span></span>类似<span class=heti-skip><span class=heti-spacing> </span>python<span class=heti-spacing> </span></span>中的<span class=heti-skip><span class=heti-spacing> </span>try-except<span class=heti-spacing> </span></span>语句<span><span class=heti-spacing> </span>)</span>，并向这一部分提供一个<strong>异常对象</strong></li> <li><code>domain_error</code> 告诉我们取值有问题，我们自定义字符串描述错误信息</li> <li><strong>左值参数</strong>：指示非临时变量的值</li> </ul> <p><strong>读取逻辑优化</strong></p> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a><a href=#__codelineno-10-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1>// read homework grades from an input stream into a `vector&lt;double&gt;'</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a><a href=#__codelineno-10-2><span class=linenos data-linenos=" 2 "></span></a><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=nf>read_hw</span><span class=p>(</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=n>in</span><span class=p>,</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&amp;</span><span class=w> </span><span class=n>hw</span><span class=p>)</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a><a href=#__codelineno-10-3><span class=linenos data-linenos=" 3 "></span></a><span class=p>{</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a><a href=#__codelineno-10-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>in</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a><a href=#__codelineno-10-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>        </span><span class=c1>// get rid of previous contents</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6></a><a href=#__codelineno-10-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>        </span><span class=n>hw</span><span class=p>.</span><span class=n>clear</span><span class=p>();</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7></a><a href=#__codelineno-10-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8></a><a href=#__codelineno-10-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=c1>// read homework grades</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9></a><a href=#__codelineno-10-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=kt>double</span><span class=w> </span><span class=n>x</span><span class=p>;</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10></a><a href=#__codelineno-10-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>in</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>x</span><span class=p>)</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11></a><a href=#__codelineno-10-11><span class=linenos data-linenos="11 "></span></a><span class=w>            </span><span class=n>hw</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12></a><a href=#__codelineno-10-12><span class=linenos data-linenos="12 "></span></a>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13></a><a href=#__codelineno-10-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=c1>// clear the stream so that input will work for the next student</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14></a><a href=#__codelineno-10-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=n>in</span><span class=p>.</span><span class=n>clear</span><span class=p>();</span><span class=w> </span><span class=c1>// avoid failure by wrong input</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15></a><a href=#__codelineno-10-15><span class=linenos data-linenos="15 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16></a><a href=#__codelineno-10-16><span class=linenos data-linenos="16 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>in</span><span class=p>;</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17></a><a href=#__codelineno-10-17><span class=linenos data-linenos="17 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>vector&lt;double&gt;&amp; hw</code> 是引用，节省了复制的开销</li> <li>三种参数类型<ul> <li><code>vector&lt;double&gt;</code> </li> <li><code>const vector&lt;double&gt;</code></li> <li><code>vector&lt;double&gt;&amp;</code></li> </ul> </li> <li><code>try-catch</code> 语句示例</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a><a href=#__codelineno-11-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>try</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2></a><a href=#__codelineno-11-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>        </span><span class=kt>double</span><span class=w> </span><span class=n>final_grade</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grade</span><span class=p>(</span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>,</span><span class=w> </span><span class=n>homework</span><span class=p>);</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3></a><a href=#__codelineno-11-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>        </span><span class=n>streamsize</span><span class=w> </span><span class=n>prec</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cout</span><span class=p>.</span><span class=n>precision</span><span class=p>();</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4></a><a href=#__codelineno-11-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Your final grade is "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5></a><a href=#__codelineno-11-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>             </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>final_grade</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=n>prec</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6></a><a href=#__codelineno-11-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>domain_error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7></a><a href=#__codelineno-11-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"You must enter your grades.  "</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8></a><a href=#__codelineno-11-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>            </span><span class=s>"Please try again."</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9></a><a href=#__codelineno-11-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10></a><a href=#__codelineno-11-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=p>}</span>
</span></code></pre></div> <ul> <li><strong>保证一条语句的副作用个数不会超过一个</strong>，抛出一个异常是一个副作用，因此在一条可能会引发异常的语句中不应该再出现任何其他的副作用，尤其是哪些包含有输入和输出的语句。上面的语句满足了这个要求，<strong>没有把<span class=heti-skip><span class=heti-spacing> </span>final_grade<span class=heti-spacing> </span></span>放入输入输出语句中</strong>。</li> </ul> <h3 id=42><span>4.2<span class=heti-spacing> </span></span>组织数据<a class=headerlink href=#42 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1></a><a href=#__codelineno-12-1><span class=linenos data-linenos=" 1 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2></a><a href=#__codelineno-12-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3></a><a href=#__codelineno-12-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;</span><span class=w> </span><span class=n>students</span><span class=p>;</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4></a><a href=#__codelineno-12-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=n>student_info</span><span class=w> </span><span class=n>record</span><span class=p>;</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5></a><a href=#__codelineno-12-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>    </span><span class=n>string</span><span class=o>::</span><span class=n>size_type</span><span class=w> </span><span class=n>maxlen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6></a><a href=#__codelineno-12-6><span class=linenos data-linenos=" 6 "></span></a>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7></a><a href=#__codelineno-12-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=c1>//读并存储所有的记录，然后找出最长的姓名的长度</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8></a><a href=#__codelineno-12-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=k>while</span><span class=p>(</span><span class=n>read</span><span class=p>(</span><span class=n>cin</span><span class=p>,</span><span class=w> </span><span class=n>record</span><span class=p>))</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9></a><a href=#__codelineno-12-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10></a><a href=#__codelineno-12-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=n>maxlen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=n>maxlen</span><span class=p>,</span><span class=w> </span><span class=n>record</span><span class=p>.</span><span class=n>name</span><span class=p>.</span><span class=n>size</span><span class=p>());</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11></a><a href=#__codelineno-12-11><span class=linenos data-linenos="11 "></span></a><span class=w>        </span><span class=n>students</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>record</span><span class=p>);</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12></a><a href=#__codelineno-12-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13></a><a href=#__codelineno-12-13><span class=linenos data-linenos="13 "></span></a>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14></a><a href=#__codelineno-12-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=c1>//按字母顺序排列记录</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15></a><a href=#__codelineno-12-15><span class=linenos data-linenos="15 "></span></a><span class=w>    </span><span class=n>sort</span><span class=p>(</span><span class=n>Students</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>compare</span><span class=p>);</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16></a><a href=#__codelineno-12-16><span class=linenos data-linenos="16 "></span></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;::</span><span class=n>size_type</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>size</span><span class=p>();</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17></a><a href=#__codelineno-12-17><span class=linenos data-linenos="17 "></span></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18></a><a href=#__codelineno-12-18><span class=linenos data-linenos="18 "></span></a><span class=w>        </span><span class=c1>//输出姓名，填充姓名以达到maxlen + 1的长度</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19></a><a href=#__codelineno-12-19><span class=linenos data-linenos="19 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setw</span><span class=p>(</span><span class=n>maxlen</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>students</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20></a><a href=#__codelineno-12-20><span class=linenos data-linenos="20 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21></a><a href=#__codelineno-12-21><span class=linenos data-linenos="21 "></span></a>
</span><span id=__span-12-22><a id=__codelineno-12-22 name=__codelineno-12-22></a><a href=#__codelineno-12-22><span class=linenos data-linenos="22 "></span></a><span class=w>    </span><span class=c1>//计算并输出成绩</span>
</span><span id=__span-12-23><a id=__codelineno-12-23 name=__codelineno-12-23></a><a href=#__codelineno-12-23><span class=linenos data-linenos="23 "></span></a><span class=w>    </span><span class=k>try</span>
</span><span id=__span-12-24><a id=__codelineno-12-24 name=__codelineno-12-24></a><a href=#__codelineno-12-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-12-25><a id=__codelineno-12-25 name=__codelineno-12-25></a><a href=#__codelineno-12-25><span class=linenos data-linenos="25 "></span></a><span class=w>        </span><span class=kt>double</span><span class=w> </span><span class=n>final_grade</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grade</span><span class=p>(</span><span class=n>students</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span><span id=__span-12-26><a id=__codelineno-12-26 name=__codelineno-12-26></a><a href=#__codelineno-12-26><span class=linenos data-linenos="26 "></span></a><span class=w>        </span><span class=n>streamsize</span><span class=w> </span><span class=n>prec</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cout</span><span class=p>.</span><span class=n>precision</span><span class=p>();</span>
</span><span id=__span-12-27><a id=__codelineno-12-27 name=__codelineno-12-27></a><a href=#__codelineno-12-27><span class=linenos data-linenos="27 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>final_grade</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=n>prec</span><span class=p>);</span>
</span><span id=__span-12-28><a id=__codelineno-12-28 name=__codelineno-12-28></a><a href=#__codelineno-12-28><span class=linenos data-linenos="28 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-29><a id=__codelineno-12-29 name=__codelineno-12-29></a><a href=#__codelineno-12-29><span class=linenos data-linenos="29 "></span></a><span class=w>    </span><span class=k>catch</span><span class=p>(</span><span class=n>domain_error</span><span class=w> </span><span class=n>e</span><span class=p>){</span>
</span><span id=__span-12-30><a id=__codelineno-12-30 name=__codelineno-12-30></a><a href=#__codelineno-12-30><span class=linenos data-linenos="30 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>what</span><span class=p>();</span>
</span><span id=__span-12-31><a id=__codelineno-12-31 name=__codelineno-12-31></a><a href=#__codelineno-12-31><span class=linenos data-linenos="31 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-32><a id=__codelineno-12-32 name=__codelineno-12-32></a><a href=#__codelineno-12-32><span class=linenos data-linenos="32 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-12-33><a id=__codelineno-12-33 name=__codelineno-12-33></a><a href=#__codelineno-12-33><span class=linenos data-linenos="33 "></span></a>
</span><span id=__span-12-34><a id=__codelineno-12-34 name=__codelineno-12-34></a><a href=#__codelineno-12-34><span class=linenos data-linenos="34 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-12-35><a id=__codelineno-12-35 name=__codelineno-12-35></a><a href=#__codelineno-12-35><span class=linenos data-linenos="35 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><span>max<span class=heti-spacing> </span></span>函数在 <code>algorithm</code> 中定义</li> <li><span>e<span class=heti-spacing> </span></span>是异常的名称，这样就可以输出<span class=heti-skip><span class=heti-spacing> </span>what()<span class=heti-spacing> </span></span>中的信息。</li> </ul> <h3 id=43><span>4.3<span class=heti-spacing> </span></span>把各部分代码连接到一起<a class=headerlink href=#43 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>组装<span class=heti-skip><span class=heti-spacing> </span>median<span class=heti-spacing> </span></span>函数</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1></a><a href=#__codelineno-13-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1>// median 函数的源文件 -- median.cpp</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2></a><a href=#__codelineno-13-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;algorithm&gt;</span><span class=c1>    // to get the declaration of `sort'</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3></a><a href=#__codelineno-13-3><span class=linenos data-linenos=" 3 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdexcept&gt;</span><span class=c1>    // to get the declaration of `domain_error'</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4></a><a href=#__codelineno-13-4><span class=linenos data-linenos=" 4 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;vector&gt;</span><span class=c1>       // to get the declaration of `vector'</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5></a><a href=#__codelineno-13-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6></a><a href=#__codelineno-13-6><span class=linenos data-linenos=" 6 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>domain_error</span><span class=p>;</span><span class=w>   </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>sort</span><span class=p>;</span><span class=w>   </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=p>;</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7></a><a href=#__codelineno-13-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8></a><a href=#__codelineno-13-8><span class=linenos data-linenos=" 8 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>"median.h"</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9></a><a href=#__codelineno-13-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10></a><a href=#__codelineno-13-10><span class=linenos data-linenos="10 "></span></a><span class=c1>// compute the median of a `vector&lt;double&gt;'</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11></a><a href=#__codelineno-13-11><span class=linenos data-linenos="11 "></span></a><span class=c1>// note that calling this function copies the entire argument `vector'</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12></a><a href=#__codelineno-13-12><span class=linenos data-linenos="12 "></span></a><span class=kt>double</span><span class=w> </span><span class=nf>median</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=w> </span><span class=n>vec</span><span class=p>)</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13></a><a href=#__codelineno-13-13><span class=linenos data-linenos="13 "></span></a><span class=p>{</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14></a><a href=#__codelineno-13-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=k>typedef</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;::</span><span class=n>size_type</span><span class=w> </span><span class=n>vec_sz</span><span class=p>;</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15></a><a href=#__codelineno-13-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16></a><a href=#__codelineno-13-16><span class=linenos data-linenos="16 "></span></a><span class=w>    </span><span class=n>vec_sz</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vec</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17></a><a href=#__codelineno-13-17><span class=linenos data-linenos="17 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18></a><a href=#__codelineno-13-18><span class=linenos data-linenos="18 "></span></a><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>domain_error</span><span class=p>(</span><span class=s>"median of an empty vector"</span><span class=p>);</span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19></a><a href=#__codelineno-13-19><span class=linenos data-linenos="19 "></span></a>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20></a><a href=#__codelineno-13-20><span class=linenos data-linenos="20 "></span></a><span class=w>    </span><span class=n>sort</span><span class=p>(</span><span class=n>vec</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>vec</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21></a><a href=#__codelineno-13-21><span class=linenos data-linenos="21 "></span></a>
</span><span id=__span-13-22><a id=__codelineno-13-22 name=__codelineno-13-22></a><a href=#__codelineno-13-22><span class=linenos data-linenos="22 "></span></a><span class=w>    </span><span class=n>vec_sz</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=o>/</span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-13-23><a id=__codelineno-13-23 name=__codelineno-13-23></a><a href=#__codelineno-13-23><span class=linenos data-linenos="23 "></span></a>
</span><span id=__span-13-24><a id=__codelineno-13-24 name=__codelineno-13-24></a><a href=#__codelineno-13-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span><span class=n>vec</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>vec</span><span class=p>[</span><span class=n>mid</span><span class=mi>-1</span><span class=p>])</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>vec</span><span class=p>[</span><span class=n>mid</span><span class=p>];</span>
</span><span id=__span-13-25><a id=__codelineno-13-25 name=__codelineno-13-25></a><a href=#__codelineno-13-25><span class=linenos data-linenos="25 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li>需要包含<span class=heti-skip><span class=heti-spacing> </span>median<span class=heti-spacing> </span></span>函数使用的所有名称的声明。</li> <li>如何在别的文件使用<span class=heti-skip><span class=heti-spacing> </span>median<span class=heti-spacing> </span></span>函数</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1></a><a href=#__codelineno-14-1><span class=linenos data-linenos="1 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>"median.h"</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2></a><a href=#__codelineno-14-2><span class=linenos data-linenos="2 "></span></a><span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=w> </span><span class=p>{</span><span class=cm>/* */</span><span class=p>}</span>
</span></code></pre></div> <ul> <li>自己的文件称作<strong>头文件</strong>，系统环境提供的头文件称作<strong>标准头</strong></li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1></a><a href=#__codelineno-15-1><span class=linenos data-linenos="1 "></span></a><span class=c1>//median.h 最终形式</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2></a><a href=#__codelineno-15-2><span class=linenos data-linenos="2 "></span></a><span class=cp>#ifndef GUARD_median_h</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3></a><a href=#__codelineno-15-3><span class=linenos data-linenos="3 "></span></a><span class=cp>#define GUARD_median_h</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4></a><a href=#__codelineno-15-4><span class=linenos data-linenos="4 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;vector&gt;</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5></a><a href=#__codelineno-15-5><span class=linenos data-linenos="5 "></span></a><span class=kt>double</span><span class=w> </span><span class=nf>median</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=p>);</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6></a><a href=#__codelineno-15-6><span class=linenos data-linenos="6 "></span></a>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7></a><a href=#__codelineno-15-7><span class=linenos data-linenos="7 "></span></a><span class=cp>#endif</span>
</span></code></pre></div> <ul> <li>头文件应该有什么<ul> <li><span>median<span class=heti-spacing> </span></span>的声明<ul> <li>保证<span class=heti-skip><span class=heti-spacing> </span>vector<span class=heti-spacing> </span></span>可用，所以要有<span class=heti-skip><span class=heti-spacing> </span>vector<span class=heti-spacing> </span></span>头</li> <li>头文件应该使用完整的限定名而不是<span class=heti-skip><span class=heti-spacing> </span>using<span class=heti-spacing> </span></span>声明</li> </ul> </li> <li><code>#ifndef</code> 检查<span class=heti-skip><span class=heti-spacing> </span>median.h<span class=heti-spacing> </span></span>是否被重复包含，必须位于文件的第一行</li> </ul> </li> </ul> <h3 id=44><span>4.4<span class=heti-spacing> </span></span>把计算成绩的程序分块<a class=headerlink href=#44 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1></a><a href=#__codelineno-16-1><span class=linenos data-linenos=" 1 "></span></a><span class=cp>#ifndef GUARD_Student_info</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2></a><a href=#__codelineno-16-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#define GUARD_Student_info</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3></a><a href=#__codelineno-16-3><span class=linenos data-linenos=" 3 "></span></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4></a><a href=#__codelineno-16-4><span class=linenos data-linenos=" 4 "></span></a><span class=c1>// `Student_info.h' 头文件</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5></a><a href=#__codelineno-16-5><span class=linenos data-linenos=" 5 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6></a><a href=#__codelineno-16-6><span class=linenos data-linenos=" 6 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7></a><a href=#__codelineno-16-7><span class=linenos data-linenos=" 7 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;vector&gt;</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8></a><a href=#__codelineno-16-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9></a><a href=#__codelineno-16-9><span class=linenos data-linenos=" 9 "></span></a><span class=k>struct</span><span class=w> </span><span class=nc>Student_info</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10></a><a href=#__codelineno-16-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11></a><a href=#__codelineno-16-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12></a><a href=#__codelineno-16-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=w> </span><span class=n>homework</span><span class=p>;</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13></a><a href=#__codelineno-16-13><span class=linenos data-linenos="13 "></span></a><span class=p>};</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14></a><a href=#__codelineno-16-14><span class=linenos data-linenos="14 "></span></a>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15></a><a href=#__codelineno-16-15><span class=linenos data-linenos="15 "></span></a><span class=kt>bool</span><span class=w> </span><span class=nf>compare</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Student_info</span><span class=o>&amp;</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>Student_info</span><span class=o>&amp;</span><span class=p>);</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16></a><a href=#__codelineno-16-16><span class=linenos data-linenos="16 "></span></a><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=nf>read</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=p>,</span><span class=w> </span><span class=n>Student_info</span><span class=o>&amp;</span><span class=p>);</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17></a><a href=#__codelineno-16-17><span class=linenos data-linenos="17 "></span></a><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=nf>read_hw</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=p>,</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&amp;</span><span class=p>);</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18></a><a href=#__codelineno-16-18><span class=linenos data-linenos="18 "></span></a><span class=cp>#endif</span>
</span></code></pre></div> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1></a><a href=#__codelineno-17-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1>// median.cpp 源文件</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2></a><a href=#__codelineno-17-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>"Student_info.h"</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3></a><a href=#__codelineno-17-3><span class=linenos data-linenos=" 3 "></span></a>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4></a><a href=#__codelineno-17-4><span class=linenos data-linenos=" 4 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=p>;</span><span class=w>  </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=p>;</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5></a><a href=#__codelineno-17-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6></a><a href=#__codelineno-17-6><span class=linenos data-linenos=" 6 "></span></a><span class=kt>bool</span><span class=w> </span><span class=nf>compare</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Student_info</span><span class=o>&amp;</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>Student_info</span><span class=o>&amp;</span><span class=w> </span><span class=n>y</span><span class=p>)</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7></a><a href=#__codelineno-17-7><span class=linenos data-linenos=" 7 "></span></a><span class=p>{</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8></a><a href=#__codelineno-17-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>y</span><span class=p>.</span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9></a><a href=#__codelineno-17-9><span class=linenos data-linenos=" 9 "></span></a><span class=p>}</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10></a><a href=#__codelineno-17-10><span class=linenos data-linenos="10 "></span></a>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11></a><a href=#__codelineno-17-11><span class=linenos data-linenos="11 "></span></a><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=nf>read</span><span class=p>(</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=n>is</span><span class=p>,</span><span class=w> </span><span class=n>Student_info</span><span class=o>&amp;</span><span class=w> </span><span class=n>s</span><span class=p>)</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12></a><a href=#__codelineno-17-12><span class=linenos data-linenos="12 "></span></a><span class=p>{</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13></a><a href=#__codelineno-17-13><span class=linenos data-linenos="13 "></span></a><span class=w>    </span><span class=c1>// read and store the student's name and midterm and final exam grades</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14></a><a href=#__codelineno-17-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=n>is</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>midterm</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15></a><a href=#__codelineno-17-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16></a><a href=#__codelineno-17-16><span class=linenos data-linenos="16 "></span></a><span class=w>    </span><span class=n>read_hw</span><span class=p>(</span><span class=n>is</span><span class=p>,</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>homework</span><span class=p>);</span><span class=w>  </span><span class=c1>// read and store all the student's homework grades</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17></a><a href=#__codelineno-17-17><span class=linenos data-linenos="17 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>is</span><span class=p>;</span>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18></a><a href=#__codelineno-17-18><span class=linenos data-linenos="18 "></span></a><span class=p>}</span>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19></a><a href=#__codelineno-17-19><span class=linenos data-linenos="19 "></span></a>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20></a><a href=#__codelineno-17-20><span class=linenos data-linenos="20 "></span></a><span class=c1>// read homework grades from an input stream into a `vector&lt;double&gt;'</span>
</span><span id=__span-17-21><a id=__codelineno-17-21 name=__codelineno-17-21></a><a href=#__codelineno-17-21><span class=linenos data-linenos="21 "></span></a><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=nf>read_hw</span><span class=p>(</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=n>in</span><span class=p>,</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&amp;</span><span class=w> </span><span class=n>hw</span><span class=p>)</span>
</span><span id=__span-17-22><a id=__codelineno-17-22 name=__codelineno-17-22></a><a href=#__codelineno-17-22><span class=linenos data-linenos="22 "></span></a><span class=p>{</span>
</span><span id=__span-17-23><a id=__codelineno-17-23 name=__codelineno-17-23></a><a href=#__codelineno-17-23><span class=linenos data-linenos="23 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>in</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-24><a id=__codelineno-17-24 name=__codelineno-17-24></a><a href=#__codelineno-17-24><span class=linenos data-linenos="24 "></span></a><span class=w>        </span><span class=c1>// get rid of previous contents</span>
</span><span id=__span-17-25><a id=__codelineno-17-25 name=__codelineno-17-25></a><a href=#__codelineno-17-25><span class=linenos data-linenos="25 "></span></a><span class=w>        </span><span class=n>hw</span><span class=p>.</span><span class=n>clear</span><span class=p>();</span>
</span><span id=__span-17-26><a id=__codelineno-17-26 name=__codelineno-17-26></a><a href=#__codelineno-17-26><span class=linenos data-linenos="26 "></span></a>
</span><span id=__span-17-27><a id=__codelineno-17-27 name=__codelineno-17-27></a><a href=#__codelineno-17-27><span class=linenos data-linenos="27 "></span></a><span class=w>        </span><span class=c1>// read homework grades</span>
</span><span id=__span-17-28><a id=__codelineno-17-28 name=__codelineno-17-28></a><a href=#__codelineno-17-28><span class=linenos data-linenos="28 "></span></a><span class=w>        </span><span class=kt>double</span><span class=w> </span><span class=n>x</span><span class=p>;</span>
</span><span id=__span-17-29><a id=__codelineno-17-29 name=__codelineno-17-29></a><a href=#__codelineno-17-29><span class=linenos data-linenos="29 "></span></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>in</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>x</span><span class=p>)</span>
</span><span id=__span-17-30><a id=__codelineno-17-30 name=__codelineno-17-30></a><a href=#__codelineno-17-30><span class=linenos data-linenos="30 "></span></a><span class=w>            </span><span class=n>hw</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span><span id=__span-17-31><a id=__codelineno-17-31 name=__codelineno-17-31></a><a href=#__codelineno-17-31><span class=linenos data-linenos="31 "></span></a>
</span><span id=__span-17-32><a id=__codelineno-17-32 name=__codelineno-17-32></a><a href=#__codelineno-17-32><span class=linenos data-linenos="32 "></span></a><span class=w>        </span><span class=c1>// clear the stream so that input will work for the next student</span>
</span><span id=__span-17-33><a id=__codelineno-17-33 name=__codelineno-17-33></a><a href=#__codelineno-17-33><span class=linenos data-linenos="33 "></span></a><span class=w>        </span><span class=n>in</span><span class=p>.</span><span class=n>clear</span><span class=p>();</span>
</span><span id=__span-17-34><a id=__codelineno-17-34 name=__codelineno-17-34></a><a href=#__codelineno-17-34><span class=linenos data-linenos="34 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-35><a id=__codelineno-17-35 name=__codelineno-17-35></a><a href=#__codelineno-17-35><span class=linenos data-linenos="35 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>in</span><span class=p>;</span>
</span><span id=__span-17-36><a id=__codelineno-17-36 name=__codelineno-17-36></a><a href=#__codelineno-17-36><span class=linenos data-linenos="36 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li>源文件中包含头文件可以检查声明和定义是否一致</li> </ul> <h3 id=45><span>4.5<span class=heti-spacing> </span></span>修正后的计算成绩的程序<a class=headerlink href=#45 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1></a><a href=#__codelineno-18-1><span class=linenos data-linenos=" 1 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;algorithm&gt;</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2></a><a href=#__codelineno-18-2><span class=linenos data-linenos=" 2 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iomanip&gt;</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3></a><a href=#__codelineno-18-3><span class=linenos data-linenos=" 3 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;ios&gt;</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4></a><a href=#__codelineno-18-4><span class=linenos data-linenos=" 4 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5></a><a href=#__codelineno-18-5><span class=linenos data-linenos=" 5 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdexcept&gt;</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6></a><a href=#__codelineno-18-6><span class=linenos data-linenos=" 6 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7></a><a href=#__codelineno-18-7><span class=linenos data-linenos=" 7 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;vector&gt;</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8></a><a href=#__codelineno-18-8><span class=linenos data-linenos=" 8 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>"grade.h"</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9></a><a href=#__codelineno-18-9><span class=linenos data-linenos=" 9 "></span></a><span class=cp>#include</span><span class=w> </span><span class=cpf>"Student_info.h"</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10></a><a href=#__codelineno-18-10><span class=linenos data-linenos="10 "></span></a>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11></a><a href=#__codelineno-18-11><span class=linenos data-linenos="11 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cin</span><span class=p>;</span><span class=w>                     </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>setprecision</span><span class=p>;</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12></a><a href=#__codelineno-18-12><span class=linenos data-linenos="12 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=p>;</span><span class=w>                    </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>sort</span><span class=p>;</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13></a><a href=#__codelineno-18-13><span class=linenos data-linenos="13 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>domain_error</span><span class=p>;</span><span class=w>            </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>streamsize</span><span class=p>;</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14></a><a href=#__codelineno-18-14><span class=linenos data-linenos="14 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w>                    </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>;</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15></a><a href=#__codelineno-18-15><span class=linenos data-linenos="15 "></span></a><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>max</span><span class=p>;</span><span class=w>                     </span><span class=k>using</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=p>;</span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16></a><a href=#__codelineno-18-16><span class=linenos data-linenos="16 "></span></a>
</span><span id=__span-18-17><a id=__codelineno-18-17 name=__codelineno-18-17></a><a href=#__codelineno-18-17><span class=linenos data-linenos="17 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-18-18><a id=__codelineno-18-18 name=__codelineno-18-18></a><a href=#__codelineno-18-18><span class=linenos data-linenos="18 "></span></a><span class=p>{</span>
</span><span id=__span-18-19><a id=__codelineno-18-19 name=__codelineno-18-19></a><a href=#__codelineno-18-19><span class=linenos data-linenos="19 "></span></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;</span><span class=w> </span><span class=n>students</span><span class=p>;</span>
</span><span id=__span-18-20><a id=__codelineno-18-20 name=__codelineno-18-20></a><a href=#__codelineno-18-20><span class=linenos data-linenos="20 "></span></a><span class=w>    </span><span class=n>Student_info</span><span class=w> </span><span class=n>record</span><span class=p>;</span>
</span><span id=__span-18-21><a id=__codelineno-18-21 name=__codelineno-18-21></a><a href=#__codelineno-18-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=n>string</span><span class=o>::</span><span class=n>size_type</span><span class=w> </span><span class=n>maxlen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>       </span><span class=c1>// the length of the longest name</span>
</span><span id=__span-18-22><a id=__codelineno-18-22 name=__codelineno-18-22></a><a href=#__codelineno-18-22><span class=linenos data-linenos="22 "></span></a>
</span><span id=__span-18-23><a id=__codelineno-18-23 name=__codelineno-18-23></a><a href=#__codelineno-18-23><span class=linenos data-linenos="23 "></span></a><span class=w>    </span><span class=c1>// read and store all the students' data.</span>
</span><span id=__span-18-24><a id=__codelineno-18-24 name=__codelineno-18-24></a><a href=#__codelineno-18-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=c1>// Invariant:   `students' contains all the student records read so far</span>
</span><span id=__span-18-25><a id=__codelineno-18-25 name=__codelineno-18-25></a><a href=#__codelineno-18-25><span class=linenos data-linenos="25 "></span></a><span class=w>    </span><span class=c1>//          `maxlen' contains the length of the longest name in `students'</span>
</span><span id=__span-18-26><a id=__codelineno-18-26 name=__codelineno-18-26></a><a href=#__codelineno-18-26><span class=linenos data-linenos="26 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>read</span><span class=p>(</span><span class=n>cin</span><span class=p>,</span><span class=w> </span><span class=n>record</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-27><a id=__codelineno-18-27 name=__codelineno-18-27></a><a href=#__codelineno-18-27><span class=linenos data-linenos="27 "></span></a><span class=w>        </span><span class=c1>// find length of longest name</span>
</span><span id=__span-18-28><a id=__codelineno-18-28 name=__codelineno-18-28></a><a href=#__codelineno-18-28><span class=linenos data-linenos="28 "></span></a><span class=w>        </span><span class=n>maxlen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=n>maxlen</span><span class=p>,</span><span class=w> </span><span class=n>record</span><span class=p>.</span><span class=n>name</span><span class=p>.</span><span class=n>size</span><span class=p>());</span>
</span><span id=__span-18-29><a id=__codelineno-18-29 name=__codelineno-18-29></a><a href=#__codelineno-18-29><span class=linenos data-linenos="29 "></span></a><span class=w>        </span><span class=n>students</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>record</span><span class=p>);</span>
</span><span id=__span-18-30><a id=__codelineno-18-30 name=__codelineno-18-30></a><a href=#__codelineno-18-30><span class=linenos data-linenos="30 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-18-31><a id=__codelineno-18-31 name=__codelineno-18-31></a><a href=#__codelineno-18-31><span class=linenos data-linenos="31 "></span></a>
</span><span id=__span-18-32><a id=__codelineno-18-32 name=__codelineno-18-32></a><a href=#__codelineno-18-32><span class=linenos data-linenos="32 "></span></a><span class=w>    </span><span class=c1>// alphabetize the student records</span>
</span><span id=__span-18-33><a id=__codelineno-18-33 name=__codelineno-18-33></a><a href=#__codelineno-18-33><span class=linenos data-linenos="33 "></span></a><span class=w>    </span><span class=n>sort</span><span class=p>(</span><span class=n>students</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>compare</span><span class=p>);</span>
</span><span id=__span-18-34><a id=__codelineno-18-34 name=__codelineno-18-34></a><a href=#__codelineno-18-34><span class=linenos data-linenos="34 "></span></a>
</span><span id=__span-18-35><a id=__codelineno-18-35 name=__codelineno-18-35></a><a href=#__codelineno-18-35><span class=linenos data-linenos="35 "></span></a><span class=w>    </span><span class=c1>// write the names and grades</span>
</span><span id=__span-18-36><a id=__codelineno-18-36 name=__codelineno-18-36></a><a href=#__codelineno-18-36><span class=linenos data-linenos="36 "></span></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;::</span><span class=n>size_type</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-18-37><a id=__codelineno-18-37 name=__codelineno-18-37></a><a href=#__codelineno-18-37><span class=linenos data-linenos="37 "></span></a><span class=w>         </span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>size</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-38><a id=__codelineno-18-38 name=__codelineno-18-38></a><a href=#__codelineno-18-38><span class=linenos data-linenos="38 "></span></a>
</span><span id=__span-18-39><a id=__codelineno-18-39 name=__codelineno-18-39></a><a href=#__codelineno-18-39><span class=linenos data-linenos="39 "></span></a><span class=w>        </span><span class=c1>// write the name, padded on the right to `maxlen' `+' `1' characters</span>
</span><span id=__span-18-40><a id=__codelineno-18-40 name=__codelineno-18-40></a><a href=#__codelineno-18-40><span class=linenos data-linenos="40 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>students</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>name</span>
</span><span id=__span-18-41><a id=__codelineno-18-41 name=__codelineno-18-41></a><a href=#__codelineno-18-41><span class=linenos data-linenos="41 "></span></a><span class=w>             </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>string</span><span class=p>(</span><span class=n>maxlen</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>students</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>name</span><span class=p>.</span><span class=n>size</span><span class=p>(),</span><span class=w> </span><span class=sc>' '</span><span class=p>);</span>
</span><span id=__span-18-42><a id=__codelineno-18-42 name=__codelineno-18-42></a><a href=#__codelineno-18-42><span class=linenos data-linenos="42 "></span></a>
</span><span id=__span-18-43><a id=__codelineno-18-43 name=__codelineno-18-43></a><a href=#__codelineno-18-43><span class=linenos data-linenos="43 "></span></a><span class=w>        </span><span class=c1>// compute and write the grade</span>
</span><span id=__span-18-44><a id=__codelineno-18-44 name=__codelineno-18-44></a><a href=#__codelineno-18-44><span class=linenos data-linenos="44 "></span></a><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-45><a id=__codelineno-18-45 name=__codelineno-18-45></a><a href=#__codelineno-18-45><span class=linenos data-linenos="45 "></span></a><span class=w>            </span><span class=kt>double</span><span class=w> </span><span class=n>final_grade</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grade</span><span class=p>(</span><span class=n>students</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span><span id=__span-18-46><a id=__codelineno-18-46 name=__codelineno-18-46></a><a href=#__codelineno-18-46><span class=linenos data-linenos="46 "></span></a><span class=w>            </span><span class=n>streamsize</span><span class=w> </span><span class=n>prec</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cout</span><span class=p>.</span><span class=n>precision</span><span class=p>();</span>
</span><span id=__span-18-47><a id=__codelineno-18-47 name=__codelineno-18-47></a><a href=#__codelineno-18-47><span class=linenos data-linenos="47 "></span></a><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>final_grade</span>
</span><span id=__span-18-48><a id=__codelineno-18-48 name=__codelineno-18-48></a><a href=#__codelineno-18-48><span class=linenos data-linenos="48 "></span></a><span class=w>                 </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=n>prec</span><span class=p>);</span>
</span><span id=__span-18-49><a id=__codelineno-18-49 name=__codelineno-18-49></a><a href=#__codelineno-18-49><span class=linenos data-linenos="49 "></span></a><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>domain_error</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-50><a id=__codelineno-18-50 name=__codelineno-18-50></a><a href=#__codelineno-18-50><span class=linenos data-linenos="50 "></span></a><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>what</span><span class=p>();</span>
</span><span id=__span-18-51><a id=__codelineno-18-51 name=__codelineno-18-51></a><a href=#__codelineno-18-51><span class=linenos data-linenos="51 "></span></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-18-52><a id=__codelineno-18-52 name=__codelineno-18-52></a><a href=#__codelineno-18-52><span class=linenos data-linenos="52 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-18-53><a id=__codelineno-18-53 name=__codelineno-18-53></a><a href=#__codelineno-18-53><span class=linenos data-linenos="53 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-18-54><a id=__codelineno-18-54 name=__codelineno-18-54></a><a href=#__codelineno-18-54><span class=linenos data-linenos="54 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-18-55><a id=__codelineno-18-55 name=__codelineno-18-55></a><a href=#__codelineno-18-55><span class=linenos data-linenos="55 "></span></a><span class=p>}</span>
</span></code></pre></div> <h3 id=46><span>4.6<span class=heti-spacing> </span></span>小结<a class=headerlink href=#46 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><code>#include &lt;系统头&gt;</code> ：系统头可能不是以文件的形式实现的</li> <li><code>#include "自定义头文件"</code> ：通常有后缀 <code>.h</code></li> <li>结构的定义在每一个源文件中只可以出现一次，因此它应该出现在一个有适当防护措施的头文件中。</li> </ul> <h2 id=05_1><span>05<span class=heti-spacing> </span></span>使用顺序容器并分析字符串<a class=headerlink href=#05_1 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=51><span>5.1<span class=heti-spacing> </span></span>按类别来区分学生<a class=headerlink href=#51 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>在除了向量结尾的其他地方插入或删除元素的开销可能会很大</li> </ul> <h3 id=52><span>5.2<span class=heti-spacing> </span></span>迭代器<a class=headerlink href=#52 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><strong>迭代器</strong><span>(iterator)<span class=heti-spacing> </span></span>能够<ul> <li>识别一个容器以及容器中的一个元素</li> <li>检查存储在这个元素中的值</li> <li>提供操作来移动在容器中的元素</li> <li>采用对应于容器所能够有效处理的方式来对可用的操作进行约束</li> </ul> </li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1></a><a href=#__codelineno-19-1><span class=linenos data-linenos="1 "></span></a><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;::</span><span class=n>size_type</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>!=</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>sizes</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2></a><a href=#__codelineno-19-2><span class=linenos data-linenos="2 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>students</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>name</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3></a><a href=#__codelineno-19-3><span class=linenos data-linenos="3 "></span></a><span class=c1>// OR</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4></a><a href=#__codelineno-19-4><span class=linenos data-linenos="4 "></span></a><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>iter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span><span class=w> </span><span class=n>iter</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>end</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>iter</span><span class=p>)</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5></a><a href=#__codelineno-19-5><span class=linenos data-linenos="5 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=p>(</span><span class=o>*</span><span class=n>iter</span><span class=p>).</span><span class=n>name</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span></code></pre></div> <ul> <li>每一个标准容器都定义了两种相关的迭代器类型<ul> <li><code>container-type::const_iterator</code> 如果仅仅读选用这个</li> <li><code>container-type::iterator</code></li> </ul> </li> <li><code>(*iter).name</code> 可以写为 <code>iter-&gt;name</code></li> </ul> <h3 id=53><span>5.3<span class=heti-spacing> </span></span>用迭代器代替索引<a class=headerlink href=#53 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><code>iter = students.erase(iter)</code> 只是删除<span class=heti-skip><span class=heti-spacing> </span>iter<span class=heti-spacing> </span></span>会使迭代器失效，因为<span class=heti-skip><span class=heti-spacing> </span>iter<span class=heti-spacing> </span></span>指向的元素已经消失了，这个语句会让<span class=heti-skip><span class=heti-spacing> </span>iter<span class=heti-spacing> </span></span>指向被删除元素后面的的那个元素。</li> </ul> <h3 id=54><span>5.4<span class=heti-spacing> </span></span>重新思考数据结构以实现更好的性能<a class=headerlink href=#54 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=55-list><span>5.5 list<span class=heti-spacing> </span></span>类型<a class=headerlink href=#55-list title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><span>list<span class=heti-spacing> </span></span>类型在 <code>&lt;list&gt;</code> 头文件中定义</li> <li><span>list<span class=heti-spacing> </span></span>不支持索引，但是支持迭代器</li> <li>对<span class=heti-skip><span class=heti-spacing> </span>list<span class=heti-spacing> </span></span>来说，<span>erase<span class=heti-spacing> </span></span>和<span class=heti-skip><span class=heti-spacing> </span>push_back<span class=heti-spacing> </span></span>操作不会使指向其他元素的迭代器失效，只有指向已被删除的元素的迭代器才会失效。</li> <li>不能使用标准库的<span class=heti-skip><span class=heti-spacing> </span>sort<span class=heti-spacing> </span></span>函数来为存储在<span class=heti-skip><span class=heti-spacing> </span>list<span class=heti-spacing> </span></span>中的值排序。</li> </ul> <p>这是<span class=heti-skip><span class=heti-spacing> </span>list<span class=heti-spacing> </span></span>类提供的<span class=heti-skip><span class=heti-spacing> </span>sort<span class=heti-spacing> </span></span>成员函数</p> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1></a><a href=#__codelineno-20-1><span class=linenos data-linenos="1 "></span></a><span class=n>list</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;</span><span class=w> </span><span class=n>students</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2></a><a href=#__codelineno-20-2><span class=linenos data-linenos="2 "></span></a><span class=n>students</span><span class=p>.</span><span class=n>sort</span><span class=p>(</span><span class=n>compare</span><span class=p>);</span>
</span></code></pre></div> <p>对比<span><span class=heti-spacing> </span>vector</span></p> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1></a><a href=#__codelineno-21-1><span class=linenos data-linenos="1 "></span></a><span class=n>vector</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;</span><span class=w> </span><span class=n>students</span><span class=p>;</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2></a><a href=#__codelineno-21-2><span class=linenos data-linenos="2 "></span></a><span class=n>sort</span><span class=p>(</span><span class=n>students</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>compare</span><span class=p>);</span>
</span></code></pre></div> <ul> <li>小规模输入<span class=heti-skip><span class=heti-spacing> </span>list<span class=heti-spacing> </span></span>效率要比<span class=heti-skip><span class=heti-spacing> </span>vector<span class=heti-spacing> </span></span>低</li> <li>大规模的输入，<span>vector<span class=heti-spacing> </span></span>性能会飞速下降</li> </ul> <h3 id=56><span>5.6<span class=heti-spacing> </span></span>分割字符串<a class=headerlink href=#56 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><span>substr<span class=heti-spacing> </span></span>是<span class=heti-skip><span class=heti-spacing> </span>string<span class=heti-spacing> </span></span>类的一个成员<ul> <li>从第一个参数给定的索引开始复制字符，复制的字符个数由第二个参数指定。</li> </ul> </li> </ul> <h3 id=57-split><span>5.7<span class=heti-spacing> </span></span>测试<span class=heti-skip><span class=heti-spacing> </span>split<span class=heti-spacing> </span></span>函数<a class=headerlink href=#57-split title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1></a><a href=#__codelineno-22-1><span class=linenos data-linenos=" 1 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2></a><a href=#__codelineno-22-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3></a><a href=#__codelineno-22-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4></a><a href=#__codelineno-22-4><span class=linenos data-linenos=" 4 "></span></a>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5></a><a href=#__codelineno-22-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>    </span><span class=c1>// read and split each line of input</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6></a><a href=#__codelineno-22-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>getline</span><span class=p>(</span><span class=n>cin</span><span class=p>,</span><span class=w> </span><span class=n>s</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7></a><a href=#__codelineno-22-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>        </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=n>s</span><span class=p>);</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8></a><a href=#__codelineno-22-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9></a><a href=#__codelineno-22-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=c1>// write each word in `v'</span>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10></a><a href=#__codelineno-22-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;::</span><span class=n>size_type</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>v</span><span class=p>.</span><span class=n>size</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>)</span>
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11></a><a href=#__codelineno-22-11><span class=linenos data-linenos="11 "></span></a><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12></a><a href=#__codelineno-22-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-13><a id=__codelineno-22-13 name=__codelineno-22-13></a><a href=#__codelineno-22-13><span class=linenos data-linenos="13 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-22-14><a id=__codelineno-22-14 name=__codelineno-22-14></a><a href=#__codelineno-22-14><span class=linenos data-linenos="14 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>getline</code> : <ul> <li>第一个参数是一个输入流，第二个参数是一个字符串引用，作用是把从输入流中读取到的数据存在字符串引用中。</li> <li>返回值逻辑和<span class=heti-skip><span class=heti-spacing> </span>cin<span class=heti-spacing> </span></span>相同</li> <li>读取一行输入</li> </ul> </li> </ul> <h3 id=58><span>5.8<span class=heti-spacing> </span></span>连接字符串<a class=headerlink href=#58 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=59><span>5.9<span class=heti-spacing> </span></span>小结<a class=headerlink href=#59 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><code>c.begin</code> 指向容器第一个元素的迭代器</li> <li><code>c.end()</code> 指向紧跟在<strong>最后一个位置之后</strong>的那个位置的迭代器。</li> </ul> <h2 id=06_1><span>06<span class=heti-spacing> </span></span>使用库算法<a class=headerlink href=#06_1 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=61><span>6.1<span class=heti-spacing> </span></span>分析字符串<a class=headerlink href=#61 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1></a><a href=#__codelineno-23-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>for</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>bottom</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>bottom</span><span class=p>.</span><span class=n>end</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>it</span><span class=p>)</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2></a><a href=#__codelineno-23-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3></a><a href=#__codelineno-23-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=n>ret</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=o>*</span><span class=n>it</span><span class=p>)</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4></a><a href=#__codelineno-23-4><span class=linenos data-linenos=" 4 "></span></a><span class=p>}</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5></a><a href=#__codelineno-23-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6></a><a href=#__codelineno-23-6><span class=linenos data-linenos=" 6 "></span></a><span class=c1>// OR</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7></a><a href=#__codelineno-23-7><span class=linenos data-linenos=" 7 "></span></a><span class=n>ret</span><span class=p>.</span><span class=n>insert</span><span class=p>(</span><span class=n>ret</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>bottom</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>bottom</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8></a><a href=#__codelineno-23-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9></a><a href=#__codelineno-23-9><span class=linenos data-linenos=" 9 "></span></a><span class=c1>// OR</span>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10></a><a href=#__codelineno-23-10><span class=linenos data-linenos="10 "></span></a><span class=n>copy</span><span class=p>(</span><span class=n>bottom</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>bottom</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>back_intserter</span><span class=p>(</span><span class=n>ret</span><span class=p>));</span>
</span></code></pre></div> <ul> <li><strong>迭代器适配器</strong>是把某个容器作为参数并产生一个迭代器<ul> <li><span>back_inserter<span class=heti-spacing> </span></span>就是一个迭代器适配器</li> </ul> </li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1></a><a href=#__codelineno-24-1><span class=linenos data-linenos=" 1 "></span></a><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>str</span><span class=p>)</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2></a><a href=#__codelineno-24-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3></a><a href=#__codelineno-24-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=k>typedef</span><span class=w> </span><span class=n>string</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>iter</span><span class=p>;</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4></a><a href=#__codelineno-24-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5></a><a href=#__codelineno-24-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6></a><a href=#__codelineno-24-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=n>iter</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>str</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7></a><a href=#__codelineno-24-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>str</span><span class=p>.</span><span class=n>end</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8></a><a href=#__codelineno-24-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9></a><a href=#__codelineno-24-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=c1>// ignore leading blanks</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10></a><a href=#__codelineno-24-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>find_if</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>str</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>not_space</span><span class=p>);</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11></a><a href=#__codelineno-24-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12></a><a href=#__codelineno-24-12><span class=linenos data-linenos="12 "></span></a><span class=w>        </span><span class=c1>// find end of next word</span>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13></a><a href=#__codelineno-24-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=n>iter</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>find_if</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>str</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>space</span><span class=p>);</span>
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14></a><a href=#__codelineno-24-14><span class=linenos data-linenos="14 "></span></a>
</span><span id=__span-24-15><a id=__codelineno-24-15 name=__codelineno-24-15></a><a href=#__codelineno-24-15><span class=linenos data-linenos="15 "></span></a><span class=w>        </span><span class=c1>// copy the characters in `[i,' `j)'</span>
</span><span id=__span-24-16><a id=__codelineno-24-16 name=__codelineno-24-16></a><a href=#__codelineno-24-16><span class=linenos data-linenos="16 "></span></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>str</span><span class=p>.</span><span class=n>end</span><span class=p>())</span>
</span><span id=__span-24-17><a id=__codelineno-24-17 name=__codelineno-24-17></a><a href=#__codelineno-24-17><span class=linenos data-linenos="17 "></span></a><span class=w>            </span><span class=n>ret</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>string</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>j</span><span class=p>));</span>
</span><span id=__span-24-18><a id=__codelineno-24-18 name=__codelineno-24-18></a><a href=#__codelineno-24-18><span class=linenos data-linenos="18 "></span></a><span class=w>        </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>j</span><span class=p>;</span>
</span><span id=__span-24-19><a id=__codelineno-24-19 name=__codelineno-24-19></a><a href=#__codelineno-24-19><span class=linenos data-linenos="19 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-24-20><a id=__codelineno-24-20 name=__codelineno-24-20></a><a href=#__codelineno-24-20><span class=linenos data-linenos="20 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-24-21><a id=__codelineno-24-21 name=__codelineno-24-21></a><a href=#__codelineno-24-21><span class=linenos data-linenos="21 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>find_if</code> <span>:<span class=heti-spacing> </span></span>头两个参数是迭代器<span class=heti-skip><span class=heti-spacing> </span>,<span class=heti-spacing> </span></span>第三个参数是一个谓词，它会检测自己的参数然后返回<span class=heti-skip><span class=heti-spacing> </span>true<span class=heti-spacing> </span></span>或<span class=heti-skip><span class=heti-spacing> </span>false.<span class=heti-spacing> </span></span>当碰到<span class=heti-skip><span class=heti-spacing> </span>true<span class=heti-spacing> </span></span>时停止并返回当前的迭代器</li> <li><code>substr</code> 对索引进行操作，<span>string (i, j)<span class=heti-spacing> </span></span>是区间<span class=heti-skip><span class=heti-spacing> </span>(i, j)<span class=heti-spacing> </span></span>中的字符的一个复件</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1></a><a href=#__codelineno-25-1><span class=linenos data-linenos=" 1 "></span></a><span class=kt>bool</span><span class=w> </span><span class=nf>is_palindrome</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>s</span><span class=p>)</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2></a><a href=#__codelineno-25-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3></a><a href=#__codelineno-25-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>equal</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>rbegin</span><span class=p>());</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4></a><a href=#__codelineno-25-4><span class=linenos data-linenos=" 4 "></span></a><span class=p>}</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5></a><a href=#__codelineno-25-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6></a><a href=#__codelineno-25-6><span class=linenos data-linenos=" 6 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7></a><a href=#__codelineno-25-7><span class=linenos data-linenos=" 7 "></span></a><span class=p>{</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8></a><a href=#__codelineno-25-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9></a><a href=#__codelineno-25-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>s</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10></a><a href=#__codelineno-25-10><span class=linenos data-linenos="10 "></span></a><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>is_palindrome</span><span class=p>(</span><span class=n>s</span><span class=p>))</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11></a><a href=#__codelineno-25-11><span class=linenos data-linenos="11 "></span></a><span class=w>                        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" is a palindrome"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12></a><a href=#__codelineno-25-12><span class=linenos data-linenos="12 "></span></a><span class=w>                </span><span class=k>else</span>
</span><span id=__span-25-13><a id=__codelineno-25-13 name=__codelineno-25-13></a><a href=#__codelineno-25-13><span class=linenos data-linenos="13 "></span></a><span class=w>                        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" is not a palindrome"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-25-14><a id=__codelineno-25-14 name=__codelineno-25-14></a><a href=#__codelineno-25-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-25-15><a id=__codelineno-25-15 name=__codelineno-25-15></a><a href=#__codelineno-25-15><span class=linenos data-linenos="15 "></span></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-25-16><a id=__codelineno-25-16 name=__codelineno-25-16></a><a href=#__codelineno-25-16><span class=linenos data-linenos="16 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>equal</code> <span>:<span class=heti-spacing> </span></span>比较两个序列是否包含有相等的值，前两个参数指定了第一个序列，第三个参数是第二个序列的起点，<span>equal<span class=heti-spacing> </span></span>函数假定第二个序列的长度和第一个相同。</li> <li><code>rbegin()</code> 从结尾向前逆向地比较数。</li> </ul> <p><strong>查找<span><span class=heti-spacing> </span>URL</span></strong>:</p> <ul> <li>URL： <code>protocol://resource-name</code><ul> <li><span>protocol<span class=heti-spacing> </span></span>是协议名称，仅包含字母，<span>resource<span class=heti-spacing> </span></span>可以由字母数字和某些标点组成</li> </ul> </li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1></a><a href=#__codelineno-26-1><span class=linenos data-linenos=" 1 "></span></a><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>find_urls</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>s</span><span class=p>)</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2></a><a href=#__codelineno-26-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3></a><a href=#__codelineno-26-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4></a><a href=#__codelineno-26-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=k>typedef</span><span class=w> </span><span class=n>string</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>iter</span><span class=p>;</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5></a><a href=#__codelineno-26-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>    </span><span class=n>iter</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>end</span><span class=p>();</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6></a><a href=#__codelineno-26-6><span class=linenos data-linenos=" 6 "></span></a>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7></a><a href=#__codelineno-26-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=c1>// look through the entire input</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8></a><a href=#__codelineno-26-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9></a><a href=#__codelineno-26-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10></a><a href=#__codelineno-26-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=c1>// look for one or more letters followed by `://'</span>
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11></a><a href=#__codelineno-26-11><span class=linenos data-linenos="11 "></span></a><span class=w>        </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>url_beg</span><span class=p>(</span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span>
</span><span id=__span-26-12><a id=__codelineno-26-12 name=__codelineno-26-12></a><a href=#__codelineno-26-12><span class=linenos data-linenos="12 "></span></a>
</span><span id=__span-26-13><a id=__codelineno-26-13 name=__codelineno-26-13></a><a href=#__codelineno-26-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=c1>// if we found it</span>
</span><span id=__span-26-14><a id=__codelineno-26-14 name=__codelineno-26-14></a><a href=#__codelineno-26-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-26-15><a id=__codelineno-26-15 name=__codelineno-26-15></a><a href=#__codelineno-26-15><span class=linenos data-linenos="15 "></span></a><span class=w>            </span><span class=c1>// get the rest of the \s-1URL\s0</span>
</span><span id=__span-26-16><a id=__codelineno-26-16 name=__codelineno-26-16></a><a href=#__codelineno-26-16><span class=linenos data-linenos="16 "></span></a><span class=w>            </span><span class=n>iter</span><span class=w> </span><span class=n>after</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>url_end</span><span class=p>(</span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span>
</span><span id=__span-26-17><a id=__codelineno-26-17 name=__codelineno-26-17></a><a href=#__codelineno-26-17><span class=linenos data-linenos="17 "></span></a>
</span><span id=__span-26-18><a id=__codelineno-26-18 name=__codelineno-26-18></a><a href=#__codelineno-26-18><span class=linenos data-linenos="18 "></span></a><span class=w>            </span><span class=c1>// remember the \s-1URL\s0</span>
</span><span id=__span-26-19><a id=__codelineno-26-19 name=__codelineno-26-19></a><a href=#__codelineno-26-19><span class=linenos data-linenos="19 "></span></a><span class=w>            </span><span class=n>ret</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>string</span><span class=p>(</span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>after</span><span class=p>));</span>
</span><span id=__span-26-20><a id=__codelineno-26-20 name=__codelineno-26-20></a><a href=#__codelineno-26-20><span class=linenos data-linenos="20 "></span></a>
</span><span id=__span-26-21><a id=__codelineno-26-21 name=__codelineno-26-21></a><a href=#__codelineno-26-21><span class=linenos data-linenos="21 "></span></a><span class=w>            </span><span class=c1>// advance `b' and check for more \s-1URL\s0s on this line</span>
</span><span id=__span-26-22><a id=__codelineno-26-22 name=__codelineno-26-22></a><a href=#__codelineno-26-22><span class=linenos data-linenos="22 "></span></a><span class=w>            </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>after</span><span class=p>;</span>
</span><span id=__span-26-23><a id=__codelineno-26-23 name=__codelineno-26-23></a><a href=#__codelineno-26-23><span class=linenos data-linenos="23 "></span></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-26-24><a id=__codelineno-26-24 name=__codelineno-26-24></a><a href=#__codelineno-26-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-26-25><a id=__codelineno-26-25 name=__codelineno-26-25></a><a href=#__codelineno-26-25><span class=linenos data-linenos="25 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-26-26><a id=__codelineno-26-26 name=__codelineno-26-26></a><a href=#__codelineno-26-26><span class=linenos data-linenos="26 "></span></a><span class=p>}</span>
</span></code></pre></div> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=80% href=https://cdn.jsdelivr.net/gh/Auzers/drawingbed/PixPin_2025-03-06_09-18-56.png><img alt src=https://cdn.jsdelivr.net/gh/Auzers/drawingbed/PixPin_2025-03-06_09-18-56.png></a></p> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1></a><a href=#__codelineno-27-1><span class=linenos data-linenos="1 "></span></a><span class=n>url_end</span><span class=p>(</span><span class=n>string</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>string</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>e</span><span class=p>)</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2></a><a href=#__codelineno-27-2><span class=linenos data-linenos="2 "></span></a><span class=p>{</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3></a><a href=#__codelineno-27-3><span class=linenos data-linenos="3 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>find_if</span><span class=p>(</span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>,</span><span class=w> </span><span class=n>not_url_char</span><span class=p>);</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4></a><a href=#__codelineno-27-4><span class=linenos data-linenos="4 "></span></a><span class=p>}</span>
</span></code></pre></div> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1></a><a href=#__codelineno-28-1><span class=linenos data-linenos="1 "></span></a><span class=kt>bool</span><span class=w> </span><span class=nf>not_url_char</span><span class=p>(</span><span class=kt>char</span><span class=w> </span><span class=n>c</span><span class=p>)</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2></a><a href=#__codelineno-28-2><span class=linenos data-linenos="2 "></span></a><span class=p>{</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3></a><a href=#__codelineno-28-3><span class=linenos data-linenos="3 "></span></a><span class=w>    </span><span class=c1>// characters, in addition to alphanumerics, that can appear in a \s-1URL\s0</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4></a><a href=#__codelineno-28-4><span class=linenos data-linenos="4 "></span></a><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>url_ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"~;/?:@=&amp;$-_.+!*'(),"</span><span class=p>;</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5></a><a href=#__codelineno-28-5><span class=linenos data-linenos="5 "></span></a>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6></a><a href=#__codelineno-28-6><span class=linenos data-linenos="6 "></span></a><span class=w>    </span><span class=c1>// see whether `c' can appear in a \s-1URL\s0 and return the negative</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7></a><a href=#__codelineno-28-7><span class=linenos data-linenos="7 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>!</span><span class=p>(</span><span class=n>isalnum</span><span class=p>(</span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=o>||</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8></a><a href=#__codelineno-28-8><span class=linenos data-linenos="8 "></span></a><span class=w>             </span><span class=n>find</span><span class=p>(</span><span class=n>url_ch</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>url_ch</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>url_ch</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9></a><a href=#__codelineno-28-9><span class=linenos data-linenos="9 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><span>static<span class=heti-spacing> </span></span>声明地局部变量具有全局寿命，</li> <li>find ：如果查找的值存在的话，那么函数返回第一个指向这个值的迭代器，否则返回第二个参数。</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1></a><a href=#__codelineno-29-1><span class=linenos data-linenos=" 1 "></span></a><span class=n>url_beg</span><span class=p>(</span><span class=n>string</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>string</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>e</span><span class=p>)</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2></a><a href=#__codelineno-29-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3></a><a href=#__codelineno-29-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>sep</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"://"</span><span class=p>;</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4></a><a href=#__codelineno-29-4><span class=linenos data-linenos=" 4 "></span></a>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5></a><a href=#__codelineno-29-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>    </span><span class=k>typedef</span><span class=w> </span><span class=n>string</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>iter</span><span class=p>;</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6></a><a href=#__codelineno-29-6><span class=linenos data-linenos=" 6 "></span></a>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7></a><a href=#__codelineno-29-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=c1>// `i' marks where the separator was found</span>
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8></a><a href=#__codelineno-29-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=n>iter</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9></a><a href=#__codelineno-29-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10></a><a href=#__codelineno-29-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>((</span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>search</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>,</span><span class=w> </span><span class=n>sep</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>sep</span><span class=p>.</span><span class=n>end</span><span class=p>()))</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11></a><a href=#__codelineno-29-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12></a><a href=#__codelineno-29-12><span class=linenos data-linenos="12 "></span></a><span class=w>        </span><span class=c1>// make sure the separator isn't at the beginning or end of the line</span>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13></a><a href=#__codelineno-29-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>sep</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-14><a id=__codelineno-29-14 name=__codelineno-29-14></a><a href=#__codelineno-29-14><span class=linenos data-linenos="14 "></span></a>
</span><span id=__span-29-15><a id=__codelineno-29-15 name=__codelineno-29-15></a><a href=#__codelineno-29-15><span class=linenos data-linenos="15 "></span></a><span class=w>            </span><span class=c1>// `beg' marks the beginning of the protocol-name</span>
</span><span id=__span-29-16><a id=__codelineno-29-16 name=__codelineno-29-16></a><a href=#__codelineno-29-16><span class=linenos data-linenos="16 "></span></a><span class=w>            </span><span class=n>iter</span><span class=w> </span><span class=n>beg</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-29-17><a id=__codelineno-29-17 name=__codelineno-29-17></a><a href=#__codelineno-29-17><span class=linenos data-linenos="17 "></span></a><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>beg</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>isalpha</span><span class=p>(</span><span class=n>beg</span><span class=p>[</span><span class=mi>-1</span><span class=p>]))</span>
</span><span id=__span-29-18><a id=__codelineno-29-18 name=__codelineno-29-18></a><a href=#__codelineno-29-18><span class=linenos data-linenos="18 "></span></a><span class=w>                </span><span class=o>--</span><span class=n>beg</span><span class=p>;</span>
</span><span id=__span-29-19><a id=__codelineno-29-19 name=__codelineno-29-19></a><a href=#__codelineno-29-19><span class=linenos data-linenos="19 "></span></a>
</span><span id=__span-29-20><a id=__codelineno-29-20 name=__codelineno-29-20></a><a href=#__codelineno-29-20><span class=linenos data-linenos="20 "></span></a><span class=w>            </span><span class=c1>// is there at least one appropriate character before and after the separator?</span>
</span><span id=__span-29-21><a id=__codelineno-29-21 name=__codelineno-29-21></a><a href=#__codelineno-29-21><span class=linenos data-linenos="21 "></span></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>beg</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=o>!</span><span class=n>not_url_char</span><span class=p>(</span><span class=n>i</span><span class=p>[</span><span class=n>sep</span><span class=p>.</span><span class=n>size</span><span class=p>()]))</span>
</span><span id=__span-29-22><a id=__codelineno-29-22 name=__codelineno-29-22></a><a href=#__codelineno-29-22><span class=linenos data-linenos="22 "></span></a><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>beg</span><span class=p>;</span>
</span><span id=__span-29-23><a id=__codelineno-29-23 name=__codelineno-29-23></a><a href=#__codelineno-29-23><span class=linenos data-linenos="23 "></span></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-29-24><a id=__codelineno-29-24 name=__codelineno-29-24></a><a href=#__codelineno-29-24><span class=linenos data-linenos="24 "></span></a>
</span><span id=__span-29-25><a id=__codelineno-29-25 name=__codelineno-29-25></a><a href=#__codelineno-29-25><span class=linenos data-linenos="25 "></span></a><span class=w>        </span><span class=c1>// the separator we found wasn't part of a \s-1URL\s0; advance `i' past this separator</span>
</span><span id=__span-29-26><a id=__codelineno-29-26 name=__codelineno-29-26></a><a href=#__codelineno-29-26><span class=linenos data-linenos="26 "></span></a><span class=w>        </span><span class=n>i</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>sep</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-29-27><a id=__codelineno-29-27 name=__codelineno-29-27></a><a href=#__codelineno-29-27><span class=linenos data-linenos="27 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-29-28><a id=__codelineno-29-28 name=__codelineno-29-28></a><a href=#__codelineno-29-28><span class=linenos data-linenos="28 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>e</span><span class=p>;</span>
</span><span id=__span-29-29><a id=__codelineno-29-29 name=__codelineno-29-29></a><a href=#__codelineno-29-29><span class=linenos data-linenos="29 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>search</code> <span>:<span class=heti-spacing> </span></span>第一对参数指示了要查找的序列，第二队指示了一个序列，如果<span class=heti-skip><span class=heti-spacing> </span>search<span class=heti-spacing> </span></span>失败将返回第二个迭代器，找到了就返回 <code>sep.begin()</code></li> <li><code>beg[-1]</code> 即 <code>*(beg - 1)</code></li> </ul> <h3 id=62><span>6.2<span class=heti-spacing> </span></span>对计算成绩的方案进行比较<span class=heti-skip><span class=heti-spacing> </span>(<span class=heti-spacing> </span></span>可读性很差<span><span class=heti-spacing> </span>)</span><a class=headerlink href=#62 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=65><span>6.5<span class=heti-spacing> </span></span>小结<a class=headerlink href=#65 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><code>accumulate(b, e, t)</code></li> <li><code>find(b,e,t)</code></li> <li><code>find_if(b,e,t)</code></li> <li><code>search(b,e,b2,e2)</code></li> </ul> <h2 id=07_1><span>07<span class=heti-spacing> </span></span>使用关联容器<a class=headerlink href=#07_1 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=71><span>7.1<span class=heti-spacing> </span></span>支持高效查找的容器<a class=headerlink href=#71 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><span>"<span class=heti-spacing> </span></span>键<span class=heti-skip><span class=heti-spacing> </span>-<span class=heti-spacing> </span></span>值<span class=heti-skip><span class=heti-spacing> </span>"<span class=heti-spacing> </span></span>对<span class=heti-skip><span class=heti-spacing> </span>,<span class=heti-spacing> </span></span>这种数据结构被称为<strong>关联数组</strong></li> <li><span>C++<span class=heti-spacing> </span></span>中常用的一种关联数组是<span class=heti-skip><span class=heti-spacing> </span>map,<span class=heti-spacing> </span></span>在 <code>&lt;map&gt;</code> 中定义</li> <li>关联容器自动排序</li> </ul> <h3 id=72><span>7.2<span class=heti-spacing> </span></span>计算单词数<a class=headerlink href=#72 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1></a><a href=#__codelineno-30-1><span class=linenos data-linenos=" 1 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2></a><a href=#__codelineno-30-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3></a><a href=#__codelineno-30-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4></a><a href=#__codelineno-30-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>counters</span><span class=p>;</span><span class=w> </span><span class=c1>// store each word and an associated counter</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5></a><a href=#__codelineno-30-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6></a><a href=#__codelineno-30-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=c1>// read the input, keeping track of each word and how often we see it</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7></a><a href=#__codelineno-30-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>s</span><span class=p>)</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8></a><a href=#__codelineno-30-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=o>++</span><span class=n>counters</span><span class=p>[</span><span class=n>s</span><span class=p>];</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9></a><a href=#__codelineno-30-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10></a><a href=#__codelineno-30-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=c1>// write the words and associated counts</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11></a><a href=#__codelineno-30-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>&gt;::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>counters</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12></a><a href=#__codelineno-30-12><span class=linenos data-linenos="12 "></span></a><span class=w>         </span><span class=n>it</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>counters</span><span class=p>.</span><span class=n>end</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13></a><a href=#__codelineno-30-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>it</span><span class=o>-&gt;</span><span class=n>first</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"</span><span class=se>\t</span><span class=s>"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>it</span><span class=o>-&gt;</span><span class=n>second</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14></a><a href=#__codelineno-30-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15></a><a href=#__codelineno-30-15><span class=linenos data-linenos="15 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16></a><a href=#__codelineno-30-16><span class=linenos data-linenos="16 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li>要指定键值类型</li> <li>添加键的时候值会被初始化</li> <li>重复访问映射表的时候实际上使用了<strong>数对</strong></li> <li><strong>数对</strong>(pair) <ul> <li>包含<span class=heti-skip><span class=heti-spacing> </span>first<span class=heti-spacing> </span></span>和<span><span class=heti-spacing> </span>second</span></li> <li>键类型为<span><span class=heti-spacing> </span>K</span>，值类型为<span class=heti-skip><span class=heti-spacing> </span>V<span class=heti-spacing> </span></span>的映射表， <code>pair&lt;const K, V&gt;</code></li> <li>禁止修改键的值</li> </ul> </li> </ul> <h3 id=73><span>7.3<span class=heti-spacing> </span></span>产生一个交叉引用表<a class=headerlink href=#73 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1></a><a href=#__codelineno-31-1><span class=linenos data-linenos=" 1 "></span></a><span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=o>&gt;</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2></a><a href=#__codelineno-31-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>    </span><span class=n>xref</span><span class=p>(</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=n>in</span><span class=p>,</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3></a><a href=#__codelineno-31-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>         </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>find_words</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>)</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4></a><a href=#__codelineno-31-4><span class=linenos data-linenos=" 4 "></span></a><span class=p>{</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5></a><a href=#__codelineno-31-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>line</span><span class=p>;</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6></a><a href=#__codelineno-31-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>line_number</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7></a><a href=#__codelineno-31-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8></a><a href=#__codelineno-31-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9></a><a href=#__codelineno-31-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>    </span><span class=c1>// read the next line</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10></a><a href=#__codelineno-31-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>getline</span><span class=p>(</span><span class=n>in</span><span class=p>,</span><span class=w> </span><span class=n>line</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11></a><a href=#__codelineno-31-11><span class=linenos data-linenos="11 "></span></a><span class=w>        </span><span class=o>++</span><span class=n>line_number</span><span class=p>;</span>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12></a><a href=#__codelineno-31-12><span class=linenos data-linenos="12 "></span></a>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13></a><a href=#__codelineno-31-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=c1>// break the input line into words</span>
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14></a><a href=#__codelineno-31-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>words</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>find_words</span><span class=p>(</span><span class=n>line</span><span class=p>);</span>
</span><span id=__span-31-15><a id=__codelineno-31-15 name=__codelineno-31-15></a><a href=#__codelineno-31-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-31-16><a id=__codelineno-31-16 name=__codelineno-31-16></a><a href=#__codelineno-31-16><span class=linenos data-linenos="16 "></span></a><span class=w>        </span><span class=c1>// remember that each word occurs on the current line</span>
</span><span id=__span-31-17><a id=__codelineno-31-17 name=__codelineno-31-17></a><a href=#__codelineno-31-17><span class=linenos data-linenos="17 "></span></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>words</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span>
</span><span id=__span-31-18><a id=__codelineno-31-18 name=__codelineno-31-18></a><a href=#__codelineno-31-18><span class=linenos data-linenos="18 "></span></a><span class=w>             </span><span class=n>it</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>words</span><span class=p>.</span><span class=n>end</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>it</span><span class=p>)</span>
</span><span id=__span-31-19><a id=__codelineno-31-19 name=__codelineno-31-19></a><a href=#__codelineno-31-19><span class=linenos data-linenos="19 "></span></a><span class=w>            </span><span class=n>ret</span><span class=p>[</span><span class=o>*</span><span class=n>it</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>line_number</span><span class=p>);</span>
</span><span id=__span-31-20><a id=__codelineno-31-20 name=__codelineno-31-20></a><a href=#__codelineno-31-20><span class=linenos data-linenos="20 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-31-21><a id=__codelineno-31-21 name=__codelineno-31-21></a><a href=#__codelineno-31-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-31-22><a id=__codelineno-31-22 name=__codelineno-31-22></a><a href=#__codelineno-31-22><span class=linenos data-linenos="22 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>vector&lt;string&gt; find_words(const string&amp;) = split</code> 是一个<strong>缺省参数</strong><ul> <li><code>xref(cin)</code> 则调用<span><span class=heti-spacing> </span>split</span></li> <li><code>xref(cin, find_urls)</code> 则调用<span><span class=heti-spacing> </span>find_urls</span></li> </ul> </li> </ul> <p>产生交叉引用表</p> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1></a><a href=#__codelineno-32-1><span class=linenos data-linenos=" 1 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2></a><a href=#__codelineno-32-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3></a><a href=#__codelineno-32-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=c1>// call `xref' using `split' by default</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4></a><a href=#__codelineno-32-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>xref</span><span class=p>(</span><span class=n>cin</span><span class=p>);</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5></a><a href=#__codelineno-32-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6></a><a href=#__codelineno-32-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=c1>// write the results</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7></a><a href=#__codelineno-32-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=o>&gt;::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ret</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8></a><a href=#__codelineno-32-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>         </span><span class=n>it</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>ret</span><span class=p>.</span><span class=n>end</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9></a><a href=#__codelineno-32-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=c1>// write the word</span>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10></a><a href=#__codelineno-32-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>it</span><span class=o>-&gt;</span><span class=n>first</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" occurs on line(s): "</span><span class=p>;</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11></a><a href=#__codelineno-32-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12></a><a href=#__codelineno-32-12><span class=linenos data-linenos="12 "></span></a><span class=w>        </span><span class=c1>// followed by one or more line numbers</span>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13></a><a href=#__codelineno-32-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>line_it</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>it</span><span class=o>-&gt;</span><span class=n>second</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14></a><a href=#__codelineno-32-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=o>*</span><span class=n>line_it</span><span class=p>;</span><span class=w>   </span><span class=c1>// write the first line number</span>
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15></a><a href=#__codelineno-32-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16></a><a href=#__codelineno-32-16><span class=linenos data-linenos="16 "></span></a><span class=w>        </span><span class=o>++</span><span class=n>line_it</span><span class=p>;</span>
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17></a><a href=#__codelineno-32-17><span class=linenos data-linenos="17 "></span></a><span class=w>        </span><span class=c1>// write the rest of the line numbers, if any</span>
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18></a><a href=#__codelineno-32-18><span class=linenos data-linenos="18 "></span></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>line_it</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>it</span><span class=o>-&gt;</span><span class=n>second</span><span class=p>.</span><span class=n>end</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19></a><a href=#__codelineno-32-19><span class=linenos data-linenos="19 "></span></a><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>", "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=o>*</span><span class=n>line_it</span><span class=p>;</span>
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20></a><a href=#__codelineno-32-20><span class=linenos data-linenos="20 "></span></a><span class=w>            </span><span class=o>++</span><span class=n>line_it</span><span class=p>;</span>
</span><span id=__span-32-21><a id=__codelineno-32-21 name=__codelineno-32-21></a><a href=#__codelineno-32-21><span class=linenos data-linenos="21 "></span></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-32-22><a id=__codelineno-32-22 name=__codelineno-32-22></a><a href=#__codelineno-32-22><span class=linenos data-linenos="22 "></span></a><span class=w>        </span><span class=c1>// write a new line to separate each word from the next</span>
</span><span id=__span-32-23><a id=__codelineno-32-23 name=__codelineno-32-23></a><a href=#__codelineno-32-23><span class=linenos data-linenos="23 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-32-24><a id=__codelineno-32-24 name=__codelineno-32-24></a><a href=#__codelineno-32-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-32-25><a id=__codelineno-32-25 name=__codelineno-32-25></a><a href=#__codelineno-32-25><span class=linenos data-linenos="25 "></span></a>
</span><span id=__span-32-26><a id=__codelineno-32-26 name=__codelineno-32-26></a><a href=#__codelineno-32-26><span class=linenos data-linenos="26 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-32-27><a id=__codelineno-32-27 name=__codelineno-32-27></a><a href=#__codelineno-32-27><span class=linenos data-linenos="27 "></span></a><span class=p>}</span>
</span></code></pre></div> <h3 id=74><span>7.4<span class=heti-spacing> </span></span>生成句子<a class=headerlink href=#74 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>读入文法</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1></a><a href=#__codelineno-33-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>typedef</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>Rule</span><span class=p>;</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2></a><a href=#__codelineno-33-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>typedef</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Rule</span><span class=o>&gt;</span><span class=w> </span><span class=n>Rule_collection</span><span class=p>;</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3></a><a href=#__codelineno-33-3><span class=linenos data-linenos=" 3 "></span></a><span class=k>typedef</span><span class=w> </span><span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>Rule_collection</span><span class=o>&gt;</span><span class=w> </span><span class=n>Grammar</span><span class=p>;</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4></a><a href=#__codelineno-33-4><span class=linenos data-linenos=" 4 "></span></a>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5></a><a href=#__codelineno-33-5><span class=linenos data-linenos=" 5 "></span></a><span class=c1>// read a grammar from a given input stream</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6></a><a href=#__codelineno-33-6><span class=linenos data-linenos=" 6 "></span></a><span class=n>Grammar</span><span class=w> </span><span class=nf>read_grammar</span><span class=p>(</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=n>in</span><span class=p>)</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7></a><a href=#__codelineno-33-7><span class=linenos data-linenos=" 7 "></span></a><span class=p>{</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8></a><a href=#__codelineno-33-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=n>Grammar</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9></a><a href=#__codelineno-33-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>line</span><span class=p>;</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10></a><a href=#__codelineno-33-10><span class=linenos data-linenos="10 "></span></a>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11></a><a href=#__codelineno-33-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=c1>// read the input</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12></a><a href=#__codelineno-33-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>getline</span><span class=p>(</span><span class=n>in</span><span class=p>,</span><span class=w> </span><span class=n>line</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13></a><a href=#__codelineno-33-13><span class=linenos data-linenos="13 "></span></a>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14></a><a href=#__codelineno-33-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=c1>// `split' the input into words</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15></a><a href=#__codelineno-33-15><span class=linenos data-linenos="15 "></span></a><span class=w>        </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>entry</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>split</span><span class=p>(</span><span class=n>line</span><span class=p>);</span>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16></a><a href=#__codelineno-33-16><span class=linenos data-linenos="16 "></span></a>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17></a><a href=#__codelineno-33-17><span class=linenos data-linenos="17 "></span></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>entry</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18></a><a href=#__codelineno-33-18><span class=linenos data-linenos="18 "></span></a><span class=w>            </span><span class=c1>// use the category to store the associated rule</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19></a><a href=#__codelineno-33-19><span class=linenos data-linenos="19 "></span></a><span class=w>            </span><span class=n>ret</span><span class=p>[</span><span class=n>entry</span><span class=p>[</span><span class=mi>0</span><span class=p>]].</span><span class=n>push_back</span><span class=p>(</span>
</span><span id=__span-33-20><a id=__codelineno-33-20 name=__codelineno-33-20></a><a href=#__codelineno-33-20><span class=linenos data-linenos="20 "></span></a><span class=w>                </span><span class=n>Rule</span><span class=p>(</span><span class=n>entry</span><span class=p>.</span><span class=n>begin</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>entry</span><span class=p>.</span><span class=n>end</span><span class=p>()));</span>
</span><span id=__span-33-21><a id=__codelineno-33-21 name=__codelineno-33-21></a><a href=#__codelineno-33-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-33-22><a id=__codelineno-33-22 name=__codelineno-33-22></a><a href=#__codelineno-33-22><span class=linenos data-linenos="22 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-33-23><a id=__codelineno-33-23 name=__codelineno-33-23></a><a href=#__codelineno-33-23><span class=linenos data-linenos="23 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><span>gen_aux<span class=heti-spacing> </span></span>使用文法<span class=heti-skip><span class=heti-spacing> </span>g<span class=heti-spacing> </span></span>并按照 <code>&lt;sentence&gt;</code> 规则生成一个句子</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1></a><a href=#__codelineno-34-1><span class=linenos data-linenos=" 1 "></span></a><span class=kt>void</span><span class=w> </span><span class=nf>gen_aux</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Grammar</span><span class=o>&amp;</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=p>,</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;&amp;</span><span class=p>);</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2></a><a href=#__codelineno-34-2><span class=linenos data-linenos=" 2 "></span></a>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3></a><a href=#__codelineno-34-3><span class=linenos data-linenos=" 3 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>nrand</span><span class=p>(</span><span class=kt>int</span><span class=p>);</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4></a><a href=#__codelineno-34-4><span class=linenos data-linenos=" 4 "></span></a>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5></a><a href=#__codelineno-34-5><span class=linenos data-linenos=" 5 "></span></a><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>gen_sentence</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Grammar</span><span class=o>&amp;</span><span class=w> </span><span class=n>g</span><span class=p>)</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6></a><a href=#__codelineno-34-6><span class=linenos data-linenos=" 6 "></span></a><span class=p>{</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7></a><a href=#__codelineno-34-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8></a><a href=#__codelineno-34-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=n>gen_aux</span><span class=p>(</span><span class=n>g</span><span class=p>,</span><span class=w> </span><span class=s>"&lt;sentence&gt;"</span><span class=p>,</span><span class=w> </span><span class=n>ret</span><span class=p>);</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9></a><a href=#__codelineno-34-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ret</span><span class=p>;</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10></a><a href=#__codelineno-34-10><span class=linenos data-linenos="10 "></span></a><span class=p>}</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11></a><a href=#__codelineno-34-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12></a><a href=#__codelineno-34-12><span class=linenos data-linenos="12 "></span></a><span class=kt>bool</span><span class=w> </span><span class=n>bracketed</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>s</span><span class=p>)</span>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13></a><a href=#__codelineno-34-13><span class=linenos data-linenos="13 "></span></a><span class=p>{</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14></a><a href=#__codelineno-34-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>s</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=sc>'&lt;'</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>s</span><span class=p>[</span><span class=n>s</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=sc>'&gt;'</span><span class=p>;</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15></a><a href=#__codelineno-34-15><span class=linenos data-linenos="15 "></span></a><span class=p>}</span>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16></a><a href=#__codelineno-34-16><span class=linenos data-linenos="16 "></span></a>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17></a><a href=#__codelineno-34-17><span class=linenos data-linenos="17 "></span></a><span class=kt>void</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18></a><a href=#__codelineno-34-18><span class=linenos data-linenos="18 "></span></a><span class=n>gen_aux</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Grammar</span><span class=o>&amp;</span><span class=w> </span><span class=n>g</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>word</span><span class=p>,</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;&amp;</span><span class=w> </span><span class=n>ret</span><span class=p>)</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19></a><a href=#__codelineno-34-19><span class=linenos data-linenos="19 "></span></a><span class=p>{</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20></a><a href=#__codelineno-34-20><span class=linenos data-linenos="20 "></span></a>
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21></a><a href=#__codelineno-34-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>bracketed</span><span class=p>(</span><span class=n>word</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22></a><a href=#__codelineno-34-22><span class=linenos data-linenos="22 "></span></a><span class=w>        </span><span class=n>ret</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>word</span><span class=p>);</span>
</span><span id=__span-34-23><a id=__codelineno-34-23 name=__codelineno-34-23></a><a href=#__codelineno-34-23><span class=linenos data-linenos="23 "></span></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-24><a id=__codelineno-34-24 name=__codelineno-34-24></a><a href=#__codelineno-34-24><span class=linenos data-linenos="24 "></span></a><span class=w>        </span><span class=c1>// locate the rule that corresponds to `word'</span>
</span><span id=__span-34-25><a id=__codelineno-34-25 name=__codelineno-34-25></a><a href=#__codelineno-34-25><span class=linenos data-linenos="25 "></span></a><span class=w>        </span><span class=n>Grammar</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>g</span><span class=p>.</span><span class=n>find</span><span class=p>(</span><span class=n>word</span><span class=p>);</span>
</span><span id=__span-34-26><a id=__codelineno-34-26 name=__codelineno-34-26></a><a href=#__codelineno-34-26><span class=linenos data-linenos="26 "></span></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>it</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>g</span><span class=p>.</span><span class=n>end</span><span class=p>())</span>
</span><span id=__span-34-27><a id=__codelineno-34-27 name=__codelineno-34-27></a><a href=#__codelineno-34-27><span class=linenos data-linenos="27 "></span></a><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=n>logic_error</span><span class=p>(</span><span class=s>"empty rule"</span><span class=p>);</span>
</span><span id=__span-34-28><a id=__codelineno-34-28 name=__codelineno-34-28></a><a href=#__codelineno-34-28><span class=linenos data-linenos="28 "></span></a>
</span><span id=__span-34-29><a id=__codelineno-34-29 name=__codelineno-34-29></a><a href=#__codelineno-34-29><span class=linenos data-linenos="29 "></span></a><span class=w>        </span><span class=c1>// fetch the set of possible rules</span>
</span><span id=__span-34-30><a id=__codelineno-34-30 name=__codelineno-34-30></a><a href=#__codelineno-34-30><span class=linenos data-linenos="30 "></span></a><span class=w>        </span><span class=k>const</span><span class=w> </span><span class=n>Rule_collection</span><span class=o>&amp;</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>it</span><span class=o>-&gt;</span><span class=n>second</span><span class=p>;</span>
</span><span id=__span-34-31><a id=__codelineno-34-31 name=__codelineno-34-31></a><a href=#__codelineno-34-31><span class=linenos data-linenos="31 "></span></a>
</span><span id=__span-34-32><a id=__codelineno-34-32 name=__codelineno-34-32></a><a href=#__codelineno-34-32><span class=linenos data-linenos="32 "></span></a><span class=w>        </span><span class=c1>// from which we select one at random</span>
</span><span id=__span-34-33><a id=__codelineno-34-33 name=__codelineno-34-33></a><a href=#__codelineno-34-33><span class=linenos data-linenos="33 "></span></a><span class=w>        </span><span class=k>const</span><span class=w> </span><span class=n>Rule</span><span class=o>&amp;</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>c</span><span class=p>[</span><span class=n>nrand</span><span class=p>(</span><span class=n>c</span><span class=p>.</span><span class=n>size</span><span class=p>())];</span>
</span><span id=__span-34-34><a id=__codelineno-34-34 name=__codelineno-34-34></a><a href=#__codelineno-34-34><span class=linenos data-linenos="34 "></span></a>
</span><span id=__span-34-35><a id=__codelineno-34-35 name=__codelineno-34-35></a><a href=#__codelineno-34-35><span class=linenos data-linenos="35 "></span></a><span class=w>        </span><span class=c1>// recursively expand the selected rule</span>
</span><span id=__span-34-36><a id=__codelineno-34-36 name=__codelineno-34-36></a><a href=#__codelineno-34-36><span class=linenos data-linenos="36 "></span></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>Rule</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>r</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>r</span><span class=p>.</span><span class=n>end</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>)</span>
</span><span id=__span-34-37><a id=__codelineno-34-37 name=__codelineno-34-37></a><a href=#__codelineno-34-37><span class=linenos data-linenos="37 "></span></a><span class=w>            </span><span class=n>gen_aux</span><span class=p>(</span><span class=n>g</span><span class=p>,</span><span class=w> </span><span class=o>*</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>ret</span><span class=p>);</span>
</span><span id=__span-34-38><a id=__codelineno-34-38 name=__codelineno-34-38></a><a href=#__codelineno-34-38><span class=linenos data-linenos="38 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-34-39><a id=__codelineno-34-39 name=__codelineno-34-39></a><a href=#__codelineno-34-39><span class=linenos data-linenos="39 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li>使用这些函数</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1></a><a href=#__codelineno-35-1><span class=linenos data-linenos=" 1 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2></a><a href=#__codelineno-35-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3></a><a href=#__codelineno-35-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=c1>// generate the sentence</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4></a><a href=#__codelineno-35-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=w> </span><span class=n>sentence</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>gen_sentence</span><span class=p>(</span><span class=n>read_grammar</span><span class=p>(</span><span class=n>cin</span><span class=p>));</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5></a><a href=#__codelineno-35-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6></a><a href=#__codelineno-35-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=c1>// write the first word, if any</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7></a><a href=#__codelineno-35-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sentence</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8></a><a href=#__codelineno-35-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>sentence</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9></a><a href=#__codelineno-35-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=o>*</span><span class=n>it</span><span class=p>;</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10></a><a href=#__codelineno-35-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=o>++</span><span class=n>it</span><span class=p>;</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11></a><a href=#__codelineno-35-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12></a><a href=#__codelineno-35-12><span class=linenos data-linenos="12 "></span></a>
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13></a><a href=#__codelineno-35-13><span class=linenos data-linenos="13 "></span></a><span class=w>    </span><span class=c1>// write the rest of the words, each preceded by a space</span>
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14></a><a href=#__codelineno-35-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>it</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>sentence</span><span class=p>.</span><span class=n>end</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15></a><a href=#__codelineno-35-15><span class=linenos data-linenos="15 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=o>*</span><span class=n>it</span><span class=p>;</span>
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16></a><a href=#__codelineno-35-16><span class=linenos data-linenos="16 "></span></a><span class=w>        </span><span class=o>++</span><span class=n>it</span><span class=p>;</span>
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17></a><a href=#__codelineno-35-17><span class=linenos data-linenos="17 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18></a><a href=#__codelineno-35-18><span class=linenos data-linenos="18 "></span></a>
</span><span id=__span-35-19><a id=__codelineno-35-19 name=__codelineno-35-19></a><a href=#__codelineno-35-19><span class=linenos data-linenos="19 "></span></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-35-20><a id=__codelineno-35-20 name=__codelineno-35-20></a><a href=#__codelineno-35-20><span class=linenos data-linenos="20 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-35-21><a id=__codelineno-35-21 name=__codelineno-35-21></a><a href=#__codelineno-35-21><span class=linenos data-linenos="21 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li>编写<span><span class=heti-spacing> </span>nrand</span></li> <li><code>&lt;cstdlib&gt;</code> 中包含了一个名为<span class=heti-skip><span class=heti-spacing> </span>rand<span class=heti-spacing> </span></span>的函数，不含参数，返回 <code>[0, RAND_MAX]</code> 中的一个随机整数，这里<span class=heti-skip><span class=heti-spacing> </span>RAND_MAX<span class=heti-spacing> </span></span>是一个大整数，也在 <code>&lt;cstdlib&gt;</code> 中定义，</li> <li>使用<span class=heti-skip><span class=heti-spacing> </span>rand () % n<span class=heti-spacing> </span></span>会使得一些余数出现的频率更高，假定<span class=heti-skip><span class=heti-spacing> </span>RAND_MAX<span class=heti-spacing> </span></span>为<span class=heti-skip><span class=heti-spacing> </span>32767<span class=heti-spacing> </span></span>那么出现<span class=heti-skip><span class=heti-spacing> </span>10000<span class=heti-spacing> </span></span>的情况有<span><span class=heti-spacing> </span>30000 % 20000 = 10000</span>，10000 % 20000 = 10000，而出现<span class=heti-skip><span class=heti-spacing> </span>15000<span class=heti-spacing> </span></span>的情况只有<span><span class=heti-spacing> </span>15000 % 20000 = 15000</span></li> <li>我们使用<strong>存储桶</strong>的方法 </li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1></a><a href=#__codelineno-36-1><span class=linenos data-linenos=" 1 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>nrand</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>)</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2></a><a href=#__codelineno-36-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3></a><a href=#__codelineno-36-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>RAND_MAX</span><span class=p>)</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4></a><a href=#__codelineno-36-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>domain_error</span><span class=p>(</span><span class=s>"Argument to nrand is out of range"</span><span class=p>);</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5></a><a href=#__codelineno-36-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6></a><a href=#__codelineno-36-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>bucket_size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RAND_MAX</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7></a><a href=#__codelineno-36-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>r</span><span class=p>;</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8></a><a href=#__codelineno-36-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-36-9><a id=__codelineno-36-9 name=__codelineno-36-9></a><a href=#__codelineno-36-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>    </span><span class=k>do</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rand</span><span class=p>()</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>bucket_size</span><span class=p>;</span>
</span><span id=__span-36-10><a id=__codelineno-36-10 name=__codelineno-36-10></a><a href=#__codelineno-36-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>r</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>n</span><span class=p>);</span>
</span><span id=__span-36-11><a id=__codelineno-36-11 name=__codelineno-36-11></a><a href=#__codelineno-36-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-36-12><a id=__codelineno-36-12 name=__codelineno-36-12></a><a href=#__codelineno-36-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>r</span><span class=p>;</span>
</span><span id=__span-36-13><a id=__codelineno-36-13 name=__codelineno-36-13></a><a href=#__codelineno-36-13><span class=linenos data-linenos="13 "></span></a><span class=p>}</span>
</span></code></pre></div> <h3 id=75><span>7.5<span class=heti-spacing> </span></span>关于性能的说明<a class=headerlink href=#75 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=76><span>7.6<span class=heti-spacing> </span></span>小结<a class=headerlink href=#76 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><code>pair&lt;k, v&gt;</code> 保存了一对数值，通过<span class=heti-skip><span class=heti-spacing> </span>first<span class=heti-spacing> </span></span>和<span class=heti-skip><span class=heti-spacing> </span>second<span class=heti-spacing> </span></span>来访问</li> <li><code>map&lt;k, v&gt;</code> 是一个关联数组，键为<span><span class=heti-spacing> </span>K</span>，值为<span><span class=heti-spacing> </span>V</span>。如果<span class=heti-skip><span class=heti-spacing> </span>iter<span class=heti-spacing> </span></span>是指向某个元素的迭代器，可以用<span class=heti-skip><span class=heti-spacing> </span>iter-&gt;first, iter-&gt;second<span class=heti-spacing> </span></span>来访问键和值</li> <li><code>map&lt;k, v&gt; m</code> <code>m.find(k)</code> 返回一个迭代器，这个迭代器指向键为<span class=heti-skip><span class=heti-spacing> </span>K<span class=heti-spacing> </span></span>的元素</li> </ul> <h2 id=08_1><span>08<span class=heti-spacing> </span></span>编写泛型函数<a class=headerlink href=#08_1 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=81><span>8.1<span class=heti-spacing> </span></span>泛型函数是什么<a class=headerlink href=#81 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1></a><a href=#__codelineno-37-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2></a><a href=#__codelineno-37-2><span class=linenos data-linenos=" 2 "></span></a><span class=n>T</span><span class=w> </span><span class=n>median</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>v</span><span class=p>)</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3></a><a href=#__codelineno-37-3><span class=linenos data-linenos=" 3 "></span></a><span class=p>{</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4></a><a href=#__codelineno-37-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=k>typedef</span><span class=w> </span><span class=k>typename</span><span class=w> </span><span class=nc>vector</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;::</span><span class=n>size_type</span><span class=w> </span><span class=n>vec_sz</span><span class=p>;</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5></a><a href=#__codelineno-37-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6></a><a href=#__codelineno-37-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=n>vec_sz</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>v</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7></a><a href=#__codelineno-37-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8></a><a href=#__codelineno-37-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>domain_error</span><span class=p>(</span><span class=s>"median of an empty vector"</span><span class=p>);</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9></a><a href=#__codelineno-37-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10></a><a href=#__codelineno-37-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=n>sort</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>v</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11></a><a href=#__codelineno-37-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12></a><a href=#__codelineno-37-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=n>vec_sz</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=o>/</span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13></a><a href=#__codelineno-37-13><span class=linenos data-linenos="13 "></span></a>
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14></a><a href=#__codelineno-37-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>mid</span><span class=mi>-1</span><span class=p>])</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>mid</span><span class=p>];</span>
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15></a><a href=#__codelineno-37-15><span class=linenos data-linenos="15 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li>实现了泛型函数的语言特征被称为<strong>模板函数</strong></li> <li><code>template&lt;class T&gt;</code> 告知系统环境我们定义了一个模板函数</li> <li><code>typename</code> 告知系统环境后面的内容是一个类型名</li> <li>如果用 <code>&lt;vector&lt;int&gt;</code> 类型调用<span><span class=heti-spacing> </span>median</span>，那么<span class=heti-skip><span class=heti-spacing> </span>int<span class=heti-spacing> </span></span>会代替所有<span class=heti-skip><span class=heti-spacing> </span>T<span class=heti-spacing> </span></span>的使用</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1></a><a href=#__codelineno-38-1><span class=linenos data-linenos="1 "></span></a><span class=c1>// 这个函数不能通过编译，</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2></a><a href=#__codelineno-38-2><span class=linenos data-linenos="2 "></span></a><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3></a><a href=#__codelineno-38-3><span class=linenos data-linenos="3 "></span></a><span class=n>T</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4></a><a href=#__codelineno-38-4><span class=linenos data-linenos="4 "></span></a><span class=p>{</span><span class=w>   </span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5></a><a href=#__codelineno-38-5><span class=linenos data-linenos="5 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6></a><a href=#__codelineno-38-6><span class=linenos data-linenos="6 "></span></a><span class=p>}</span>
</span></code></pre></div> <h3 id=82><span>8.2<span class=heti-spacing> </span></span>数据结构独立性<a class=headerlink href=#82 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h2 id=09><span>09<span class=heti-spacing> </span></span>定义新类型<a class=headerlink href=#09 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h2> <h3 id=91-student_info><span>9.1<span class=heti-spacing> </span></span>回顾一下<span><span class=heti-spacing> </span>Student_info</span><a class=headerlink href=#91-student_info title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <h3 id=92><span>9.2<span class=heti-spacing> </span></span>自定义类型<a class=headerlink href=#92 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1></a><a href=#__codelineno-39-1><span class=linenos data-linenos="1 "></span></a><span class=k>struct</span><span class=w> </span><span class=nc>Student_info</span><span class=p>(){</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2></a><a href=#__codelineno-39-2><span class=linenos data-linenos="2 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3></a><a href=#__codelineno-39-3><span class=linenos data-linenos="3 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4></a><a href=#__codelineno-39-4><span class=linenos data-linenos="4 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=w> </span><span class=n>homework</span><span class=p>;</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5></a><a href=#__codelineno-39-5><span class=linenos data-linenos="5 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li>类的声明常常在头文件中，一般没有<span class=heti-skip><span class=heti-spacing> </span>using<span class=heti-spacing> </span></span>声明</li> </ul> <h4 id=921><span>9.2.1<span class=heti-spacing> </span></span>成员函数<a class=headerlink href=#921 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h4> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1></a><a href=#__codelineno-40-1><span class=linenos data-linenos="1 "></span></a><span class=k>struct</span><span class=w> </span><span class=nc>Student_info</span><span class=p>(){</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2></a><a href=#__codelineno-40-2><span class=linenos data-linenos="2 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3></a><a href=#__codelineno-40-3><span class=linenos data-linenos="3 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4></a><a href=#__codelineno-40-4><span class=linenos data-linenos="4 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=w> </span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=w> </span><span class=n>homework</span><span class=p>;</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5></a><a href=#__codelineno-40-5><span class=linenos data-linenos="5 "></span></a>
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6></a><a href=#__codelineno-40-6><span class=linenos data-linenos="6 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=p>);</span>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7></a><a href=#__codelineno-40-7><span class=linenos data-linenos="7 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=nf>grade</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=p>;</span><span class=w> </span><span class=c1>// const 说明不会修改成员变量</span>
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8></a><a href=#__codelineno-40-8><span class=linenos data-linenos="8 "></span></a><span class=p>}</span>
</span></code></pre></div> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1></a><a href=#__codelineno-41-1><span class=linenos data-linenos="1 "></span></a><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=nf>Student_info::read</span><span class=p>(</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=n>in</span><span class=p>)</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2></a><a href=#__codelineno-41-2><span class=linenos data-linenos="2 "></span></a><span class=p>{</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3></a><a href=#__codelineno-41-3><span class=linenos data-linenos="3 "></span></a><span class=w>    </span><span class=n>in</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>midterm</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4></a><a href=#__codelineno-41-4><span class=linenos data-linenos="4 "></span></a><span class=w>    </span><span class=n>read_hw</span><span class=p>(</span><span class=n>in</span><span class=p>,</span><span class=w> </span><span class=n>homework</span><span class=p>);</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5></a><a href=#__codelineno-41-5><span class=linenos data-linenos="5 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>in</span><span class=p>;</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6></a><a href=#__codelineno-41-6><span class=linenos data-linenos="6 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><span>read<span class=heti-spacing> </span></span>函数将被放入名为 <code>Student_info.cpp</code> 的源文件中。</li> <li>函数名是 <code>Student_info::read</code> 而不是<code>read</code><span class=heti-skip><span class=heti-spacing> </span>,<span class=heti-spacing> </span></span>因为这个函数是 <code>Student_info</code> 的成员</li> <li>可以直接访问对象的数据元素。 </li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1></a><a href=#__codelineno-42-1><span class=linenos data-linenos="1 "></span></a><span class=kt>double</span><span class=w> </span><span class=nf>Student_info::grade</span><span class=p>()</span><span class=w> </span><span class=k>const</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2></a><a href=#__codelineno-42-2><span class=linenos data-linenos="2 "></span></a><span class=p>{</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3></a><a href=#__codelineno-42-3><span class=linenos data-linenos="3 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>::</span><span class=n>grade</span><span class=p>(</span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>,</span><span class=w> </span><span class=n>homework</span><span class=p>);</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4></a><a href=#__codelineno-42-4><span class=linenos data-linenos="4 "></span></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>::grade</code> 如果我们把 <code>::</code> 放在一个名称之前那就表明我们要使用这个名称的某一个版本，而这个版本不是任何结构体的成员。</li> <li>不能对常量对象调用非常量函数</li> <li>常量成员函数不能改变对象的内部状态</li> </ul> <h3 id=93><span>9.3<span class=heti-spacing> </span></span>保护<a class=headerlink href=#93 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1></a><a href=#__codelineno-43-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>class</span><span class=w> </span><span class=nc>Student_info</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2></a><a href=#__codelineno-43-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>public</span><span class=o>:</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3></a><a href=#__codelineno-43-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=n>Student_info</span><span class=p>();</span><span class=w>              </span><span class=c1>// construct an empty `Student_info' object</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4></a><a href=#__codelineno-43-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=n>Student_info</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=p>);</span><span class=w> </span><span class=c1>// construct one by reading a stream</span>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5></a><a href=#__codelineno-43-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=nf>name</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>n</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6></a><a href=#__codelineno-43-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=kt>bool</span><span class=w> </span><span class=nf>valid</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=o>!</span><span class=n>homework</span><span class=p>.</span><span class=n>empty</span><span class=p>();</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7></a><a href=#__codelineno-43-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8></a><a href=#__codelineno-43-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=c1>// as defined in 9.2.1/157, and changed to read into `n' instead of `name'</span>
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9></a><a href=#__codelineno-43-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=nf>read</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=p>);</span>
</span><span id=__span-43-10><a id=__codelineno-43-10 name=__codelineno-43-10></a><a href=#__codelineno-43-10><span class=linenos data-linenos="10 "></span></a>
</span><span id=__span-43-11><a id=__codelineno-43-11 name=__codelineno-43-11></a><a href=#__codelineno-43-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=nf>grade</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=p>;</span><span class=w>    </span><span class=c1>// as defined in 9.2.1/158</span>
</span><span id=__span-43-12><a id=__codelineno-43-12 name=__codelineno-43-12></a><a href=#__codelineno-43-12><span class=linenos data-linenos="12 "></span></a><span class=k>private</span><span class=o>:</span>
</span><span id=__span-43-13><a id=__codelineno-43-13 name=__codelineno-43-13></a><a href=#__codelineno-43-13><span class=linenos data-linenos="13 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-43-14><a id=__codelineno-43-14 name=__codelineno-43-14></a><a href=#__codelineno-43-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-43-15><a id=__codelineno-43-15 name=__codelineno-43-15></a><a href=#__codelineno-43-15><span class=linenos data-linenos="15 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=w> </span><span class=n>homework</span><span class=p>;</span>
</span><span id=__span-43-16><a id=__codelineno-43-16 name=__codelineno-43-16></a><a href=#__codelineno-43-16><span class=linenos data-linenos="16 "></span></a><span class=p>};</span>
</span></code></pre></div> <ul> <li><code>class</code> 和 <code>struct</code> 的差别<ul> <li><code>class</code> 缺省为私有， <code>struct</code> 缺省为公有</li> </ul> </li> </ul> <h4 id=931><span>9.3.1<span class=heti-spacing> </span></span>存取器函数<a class=headerlink href=#931 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h4> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1></a><a href=#__codelineno-44-1><span class=linenos data-linenos="1 "></span></a><span class=k>class</span><span class=w> </span><span class=nc>Student_info</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2></a><a href=#__codelineno-44-2><span class=linenos data-linenos="2 "></span></a><span class=w>    </span><span class=k>public</span><span class=o>:</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3></a><a href=#__codelineno-44-3><span class=linenos data-linenos="3 "></span></a><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>name</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>n</span><span class=p>;}</span>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4></a><a href=#__codelineno-44-4><span class=linenos data-linenos="4 "></span></a><span class=w>    </span><span class=k>private</span><span class=o>:</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5></a><a href=#__codelineno-44-5><span class=linenos data-linenos="5 "></span></a><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6></a><a href=#__codelineno-44-6><span class=linenos data-linenos="6 "></span></a><span class=p>}</span>
</span></code></pre></div> <p><strong>compare()</strong>:</p> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1></a><a href=#__codelineno-45-1><span class=linenos data-linenos="1 "></span></a><span class=kt>bool</span><span class=w> </span><span class=nf>compare</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Student_info</span><span class=o>&amp;</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>Student_info</span><span class=o>&amp;</span><span class=w> </span><span class=n>y</span><span class=p>)</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2></a><a href=#__codelineno-45-2><span class=linenos data-linenos="2 "></span></a><span class=p>{</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3></a><a href=#__codelineno-45-3><span class=linenos data-linenos="3 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>x</span><span class=p>.</span><span class=n>name</span><span class=p>()</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>y</span><span class=p>.</span><span class=n>name</span><span class=p>();</span>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4></a><a href=#__codelineno-45-4><span class=linenos data-linenos="4 "></span></a><span class=p>}</span>
</span></code></pre></div> <h3 id=94-student_info><span>9.4 Student_info<span class=heti-spacing> </span></span>类<a class=headerlink href=#94-student_info title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1></a><a href=#__codelineno-46-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>class</span><span class=w> </span><span class=nc>Student_info</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2></a><a href=#__codelineno-46-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>public</span><span class=o>:</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3></a><a href=#__codelineno-46-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=n>Student_info</span><span class=p>();</span><span class=w>              </span><span class=c1>// construct an empty `Student_info' object</span>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4></a><a href=#__codelineno-46-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=n>Student_info</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=p>);</span><span class=w> </span><span class=c1>// construct one by reading a stream</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5></a><a href=#__codelineno-46-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=nf>name</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>n</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-46-6><a id=__codelineno-46-6 name=__codelineno-46-6></a><a href=#__codelineno-46-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=kt>bool</span><span class=w> </span><span class=nf>valid</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=o>!</span><span class=n>homework</span><span class=p>.</span><span class=n>empty</span><span class=p>();</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-46-7><a id=__codelineno-46-7 name=__codelineno-46-7></a><a href=#__codelineno-46-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-46-8><a id=__codelineno-46-8 name=__codelineno-46-8></a><a href=#__codelineno-46-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=c1>// as defined in 9.2.1/157, and changed to read into `n' instead of `name'</span>
</span><span id=__span-46-9><a id=__codelineno-46-9 name=__codelineno-46-9></a><a href=#__codelineno-46-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=nf>read</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>istream</span><span class=o>&amp;</span><span class=p>);</span>
</span><span id=__span-46-10><a id=__codelineno-46-10 name=__codelineno-46-10></a><a href=#__codelineno-46-10><span class=linenos data-linenos="10 "></span></a>
</span><span id=__span-46-11><a id=__codelineno-46-11 name=__codelineno-46-11></a><a href=#__codelineno-46-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=nf>grade</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=p>;</span><span class=w>    </span><span class=c1>// as defined in 9.2.1/158</span>
</span><span id=__span-46-12><a id=__codelineno-46-12 name=__codelineno-46-12></a><a href=#__codelineno-46-12><span class=linenos data-linenos="12 "></span></a><span class=k>private</span><span class=o>:</span>
</span><span id=__span-46-13><a id=__codelineno-46-13 name=__codelineno-46-13></a><a href=#__codelineno-46-13><span class=linenos data-linenos="13 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-46-14><a id=__codelineno-46-14 name=__codelineno-46-14></a><a href=#__codelineno-46-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>midterm</span><span class=p>,</span><span class=w> </span><span class=k>final</span><span class=p>;</span>
</span><span id=__span-46-15><a id=__codelineno-46-15 name=__codelineno-46-15></a><a href=#__codelineno-46-15><span class=linenos data-linenos="15 "></span></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=w> </span><span class=n>homework</span><span class=p>;</span>
</span><span id=__span-46-16><a id=__codelineno-46-16 name=__codelineno-46-16></a><a href=#__codelineno-46-16><span class=linenos data-linenos="16 "></span></a><span class=p>};</span>
</span></code></pre></div> <ul> <li>用户只能通过调用<span class=heti-skip><span class=heti-spacing> </span>read<span class=heti-spacing> </span></span>函数改变对象状态，不能进入内部修改任何的数据成员。</li> </ul> <h3 id=95><span>9.5<span class=heti-spacing> </span></span>构造函数<a class=headerlink href=#95 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li><strong>缺省构造函数</strong> <code>Student_info()</code> :</li> </ul> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1></a><a href=#__codelineno-47-1><span class=linenos data-linenos="1 "></span></a><span class=n>Student_info</span><span class=o>::</span><span class=n>Student_info</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=n>midterm</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span><span class=w> </span><span class=k>final</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>}</span>
</span></code></pre></div> <ul> <li><strong>带参构造函数</strong> <code>Student_info(istream&amp; is) { read(is);}</code></li> </ul> <h3 id=96-student_info><span>9.6<span class=heti-spacing> </span></span>使用<span class=heti-skip><span class=heti-spacing> </span>Student_info<span class=heti-spacing> </span></span>类<a class=headerlink href=#96-student_info title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <div class="language-cpp highlight"><span class=filename>C++</span><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1></a><a href=#__codelineno-48-1><span class=linenos data-linenos=" 1 "></span></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2></a><a href=#__codelineno-48-2><span class=linenos data-linenos=" 2 "></span></a><span class=p>{</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3></a><a href=#__codelineno-48-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;</span><span class=w> </span><span class=n>students</span><span class=p>;</span>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4></a><a href=#__codelineno-48-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>    </span><span class=n>Student_info</span><span class=w> </span><span class=n>record</span><span class=p>;</span>
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5></a><a href=#__codelineno-48-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>    </span><span class=n>string</span><span class=o>::</span><span class=n>size_type</span><span class=w> </span><span class=n>maxlen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6></a><a href=#__codelineno-48-6><span class=linenos data-linenos=" 6 "></span></a>
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7></a><a href=#__codelineno-48-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=c1>// read and store the data</span>
</span><span id=__span-48-8><a id=__codelineno-48-8 name=__codelineno-48-8></a><a href=#__codelineno-48-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>record</span><span class=p>.</span><span class=n>read</span><span class=p>(</span><span class=n>cin</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>                           </span><span class=c1>// changed</span>
</span><span id=__span-48-9><a id=__codelineno-48-9 name=__codelineno-48-9></a><a href=#__codelineno-48-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=n>maxlen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=n>maxlen</span><span class=p>,</span><span class=w> </span><span class=n>record</span><span class=p>.</span><span class=n>name</span><span class=p>().</span><span class=n>size</span><span class=p>());</span><span class=w>      </span><span class=c1>// changed</span>
</span><span id=__span-48-10><a id=__codelineno-48-10 name=__codelineno-48-10></a><a href=#__codelineno-48-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=n>students</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>record</span><span class=p>);</span>
</span><span id=__span-48-11><a id=__codelineno-48-11 name=__codelineno-48-11></a><a href=#__codelineno-48-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-48-12><a id=__codelineno-48-12 name=__codelineno-48-12></a><a href=#__codelineno-48-12><span class=linenos data-linenos="12 "></span></a>
</span><span id=__span-48-13><a id=__codelineno-48-13 name=__codelineno-48-13></a><a href=#__codelineno-48-13><span class=linenos data-linenos="13 "></span></a><span class=w>    </span><span class=c1>// alphabetize the student records</span>
</span><span id=__span-48-14><a id=__codelineno-48-14 name=__codelineno-48-14></a><a href=#__codelineno-48-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=n>sort</span><span class=p>(</span><span class=n>students</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=w> </span><span class=n>compare</span><span class=p>);</span>
</span><span id=__span-48-15><a id=__codelineno-48-15 name=__codelineno-48-15></a><a href=#__codelineno-48-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-48-16><a id=__codelineno-48-16 name=__codelineno-48-16></a><a href=#__codelineno-48-16><span class=linenos data-linenos="16 "></span></a><span class=w>    </span><span class=c1>// write the names and grades</span>
</span><span id=__span-48-17><a id=__codelineno-48-17 name=__codelineno-48-17></a><a href=#__codelineno-48-17><span class=linenos data-linenos="17 "></span></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>Student_info</span><span class=o>&gt;::</span><span class=n>size_type</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-48-18><a id=__codelineno-48-18 name=__codelineno-48-18></a><a href=#__codelineno-48-18><span class=linenos data-linenos="18 "></span></a><span class=w>         </span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>size</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-48-19><a id=__codelineno-48-19 name=__codelineno-48-19></a><a href=#__codelineno-48-19><span class=linenos data-linenos="19 "></span></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>students</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>name</span><span class=p>()</span><span class=w>   </span><span class=c1>// this and the next line changed</span>
</span><span id=__span-48-20><a id=__codelineno-48-20 name=__codelineno-48-20></a><a href=#__codelineno-48-20><span class=linenos data-linenos="20 "></span></a><span class=w>             </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>string</span><span class=p>(</span><span class=n>maxlen</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>students</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>name</span><span class=p>().</span><span class=n>size</span><span class=p>(),</span><span class=w> </span><span class=sc>' '</span><span class=p>);</span>
</span><span id=__span-48-21><a id=__codelineno-48-21 name=__codelineno-48-21></a><a href=#__codelineno-48-21><span class=linenos data-linenos="21 "></span></a><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-48-22><a id=__codelineno-48-22 name=__codelineno-48-22></a><a href=#__codelineno-48-22><span class=linenos data-linenos="22 "></span></a><span class=w>            </span><span class=kt>double</span><span class=w> </span><span class=n>final_grade</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>students</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>grade</span><span class=p>();</span><span class=w>   </span><span class=c1>// changed</span>
</span><span id=__span-48-23><a id=__codelineno-48-23 name=__codelineno-48-23></a><a href=#__codelineno-48-23><span class=linenos data-linenos="23 "></span></a><span class=w>            </span><span class=n>streamsize</span><span class=w> </span><span class=n>prec</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cout</span><span class=p>.</span><span class=n>precision</span><span class=p>();</span>
</span><span id=__span-48-24><a id=__codelineno-48-24 name=__codelineno-48-24></a><a href=#__codelineno-48-24><span class=linenos data-linenos="24 "></span></a><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>final_grade</span>
</span><span id=__span-48-25><a id=__codelineno-48-25 name=__codelineno-48-25></a><a href=#__codelineno-48-25><span class=linenos data-linenos="25 "></span></a><span class=w>                 </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>setprecision</span><span class=p>(</span><span class=n>prec</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-48-26><a id=__codelineno-48-26 name=__codelineno-48-26></a><a href=#__codelineno-48-26><span class=linenos data-linenos="26 "></span></a><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>domain_error</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-48-27><a id=__codelineno-48-27 name=__codelineno-48-27></a><a href=#__codelineno-48-27><span class=linenos data-linenos="27 "></span></a><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>what</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-48-28><a id=__codelineno-48-28 name=__codelineno-48-28></a><a href=#__codelineno-48-28><span class=linenos data-linenos="28 "></span></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-48-29><a id=__codelineno-48-29 name=__codelineno-48-29></a><a href=#__codelineno-48-29><span class=linenos data-linenos="29 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-48-30><a id=__codelineno-48-30 name=__codelineno-48-30></a><a href=#__codelineno-48-30><span class=linenos data-linenos="30 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-48-31><a id=__codelineno-48-31 name=__codelineno-48-31></a><a href=#__codelineno-48-31><span class=linenos data-linenos="31 "></span></a><span class=p>}</span>
</span></code></pre></div> <h3 id=97><span>9.7<span class=heti-spacing> </span></span>小结<a class=headerlink href=#97 title="Permanent link"><span><span class=heti-spacing> </span>¶</span></a></h3> <ul> <li>保护标识符</li> <li>成员函数</li> <li>构造函数</li> <li>构造函数初始化程序列表</li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2025年3月6日 11:19:04</span> </span> <span class=md-source-file__fact> <span class=md-icon title=创建日期> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2025年3月3日 23:21:29</span> </span> </aside> <div id=__comments></div> <!-- <h3>颜色主题调整</h3>
    <div class="tx-switch">
    <button class="button1" data-md-color-primary="red" style="background-color:red">red</button>
    <button class="button1" data-md-color-primary="pink" style="background-color:pink;color:black">pink</button>
    <button class="button1" data-md-color-primary="purple" style="background-color:purple">purple</button>
    <button class="button1" data-md-color-primary="indigo" style="background-color:indigo">indigo</button>
    <button class="button1" data-md-color-primary="blue" style="background-color:blue">blue</button>
    <button class="button1" data-md-color-primary="cyan" style="background-color:cyan;color:black">cyan</button>
    <button class="button1" data-md-color-primary="teal" style="background-color:teal">teal</button>
    <button class="button1" data-md-color-primary="green" style="background-color:green">green</button>
    <button class="button1" data-md-color-primary="lime" style="background-color:lime;color:black">lime</button>
    <button class="button1" data-md-color-primary="orange" style="background-color:orange;color:black">orange</button>
    <button class="button1" data-md-color-primary="brown" style="background-color:brown;border-radius=3px">brown</button>
    <button class="button1" data-md-color-primary="grey" style="background-color:grey">grey</button>
    <button class="button1" data-md-color-primary="black" style="background-color:black">black</button>
    <button class="button1" data-md-color-primary="white" style="background-color:white;color:black">white</button>
    </div> --> <!-- Giscus --> <script async crossorigin=anonymous data-category=Announcements data-category-id=DIC_kwDONhXY184ClgKT data-emit-metadata=0 data-input-position=bottom data-lang=zh-CN data-mapping=pathname data-reactions-enabled=1 data-repo=Auzers/notes data-repo-id=R_kgDONhXY1w data-strict=0 data-theme=preferred_color_scheme src=https://giscus.app/client.js>
</script> <script>
    var buttons = document.querySelectorAll("button[data-md-color-primary]")
    buttons.forEach(function (button) {
        button.addEventListener("click", function () {
            var attr = this.getAttribute("data-md-color-primary")
            document.body.setAttribute("data-md-color-primary", attr)
            localStorage.setItem("data-md-color-primary", attr);
        })
    })
</script> <!-- Synchronize Giscus theme with palette --> <script>
    var giscus = document.querySelector("script[src*=giscus]")
</script> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme)
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function () {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function () {
            var palette = __md_get("__palette")
            if (palette && typeof palette.color === "object") {
                var theme = palette.color.scheme === "slate" ? "dark" : "light"

                /* Instruct Giscus to change theme */
                var frame = document.querySelector(".giscus-frame")
                frame.contentWindow.postMessage(
                    { giscus: { setConfig: { theme } } },
                    "https://giscus.app"
                )
            }
        })
    })
</script> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button class="md-top md-icon" data-md-component=top hidden type=button> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright © 2024 - Present <a href=https://github.com/Auzers/ rel=noopener target=_blank>Auzers</a> </div> Powered by <a href=https://www.mkdocs.org/ rel=noopener target=_blank> MkDocs </a> with theme <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material </a> <!-- modified by
      <a href="https://github.com/WncFht" target="_blank" rel="noopener">
        WncFht
      </a> --> </div> <div class=md-social> <a class=md-social__link href=https://github.com/Auzers rel=noopener target=_blank title=GitHub> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> <a class=md-social__link href=https://cdn.jsdelivr.net/gh/Auzers/drawingbed/wechat_code.jpg rel=noopener target=_blank title=WeChat> <svg viewbox="0 0 576 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154m-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4m-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2M563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4m-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6m107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.code.select", "content.action.view", "content.footnote.tooltips", "content.tabs.link", "header.autohide", "navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top", "navigation.path", "toc.follow", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../../assets/javascripts/bundle.88dd0f4e.min.js></script> <script src=../../../js/katex.min.js></script> <script src=../../../js/mathjax.min.js></script> <script src=../../../js/tablesort.js></script> <script src=../../../js/toc.min.js></script> <script src=https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/javascripts/extra.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-chtml.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-chtml-full.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-svg-full.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>